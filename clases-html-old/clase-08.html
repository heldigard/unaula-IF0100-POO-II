<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 08 - Introducci√≥n a ASP.NET Core | IF0100 - POO II</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.85;
        }

        nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 0;
            padding: 0;
            flex-wrap: wrap;
        }

        nav li {
            margin: 0;
        }

        nav a {
            display: block;
            padding: 10px 20px;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
            font-weight: 500;
        }

        nav a:hover {
            background: #e0e7ff;
        }

        section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h2 {
            color: #1e40af;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3b82f6;
        }

        h3 {
            color: #1e3a8a;
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        h4 {
            color: #3b82f6;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #e5e7eb;
        }

        th {
            background: #1e40af;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9fafb;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        pre code {
            color: inherit;
        }

        /* Syntax highlighting para C# */
        .token-keyword { color: #c792ea; font-weight: 600; }
        .token-type { color: #ffcb6b; }
        .token-string { color: #c3e88d; }
        .token-comment { color: #546e7a; font-style: italic; }
        .token-number { color: #f78c6c; }
        .token-operator { color: #89ddff; }
        /* Accessibility */
        abbr[title] { text-decoration: underline dotted; cursor: help; }

        p code, li code {
            background: #e0e7ff;
            color: #1e40af;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .diagram {
            font-family: 'Consolas', 'Monaco', monospace;
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px solid #e5e7eb;
        }

        figure {
            margin: 30px 0;
            text-align: center;
        }

        figure img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        figcaption {
            margin-top: 15px;
            font-style: italic;
            color: #64748b;
            font-size: 0.95em;
        }

        .highlight-box {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #1e40af;
            margin: 20px 0;
        }

        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin: 20px 0;
        }

        .success-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
            margin: 20px 0;
        }

        .note {
            background: #f0f4ff;
            border-left: 4px solid #3b82f6;
            padding: 10px 12px;
            border-radius: 8px;
            color: #52606d;
        }

        ul, ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #1e40af;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(30, 64, 175, 0.4);
            transition: transform 0.3s;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
        }

        footer {
            background: #1e293b;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
        }

        /* Print styles */
        @media print {
            header, nav, footer { background: white !important; color: black !important; }
            a[href]:after { content: " (" attr(href) ")"; font-size: 0.8em; }
            pre, code { white-space: pre-wrap; }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            section {
                padding: 20px;
            }
        }

        /* BLOQUES DE C√ìDIGO MEJORADOS */
        .code-block {
            background: #1e1e2e;
            border-radius: 12px;
            margin: 16px 0;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            border: 1px solid #313244;
        }

        .code-header {
            background: linear-gradient(90deg, #313244 0%, #45475a 100%);
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #45475a;
        }

        .code-dots {
            display: flex;
            gap: 6px;
        }

        .code-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-dot.red { background: #f38ba8; }
        .code-dot.yellow { background: #f9e2af; }
        .code-dot.green { background: #a6e3a1; }

        .code-title {
            color: #cdd6f4;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: auto;
            font-family: 'Cascadia Code', Consolas, monospace;
        }

        .code-content {
            display: flex;
            background: #1e1e2e;
        }

        .line-numbers {
            background: #181825;
            color: #6c7086;
            padding: 12px 10px;
            text-align: right;
            font-family: 'Cascadia Code', Consolas, monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            user-select: none;
            border-right: 1px solid #313244;
        }

        .code-block pre {
            background: transparent;
            margin: 0;
            padding: 12px 16px;
            flex: 1;
            overflow-x: auto;
        }

        .code-block pre code {
            color: #cdd6f4;
            font-size: 0.95rem;
            line-height: 1.5;
            display: block;
        }

        /* Syntax highlighting mejorado - Catppuccin Mocha theme */
        .code-block .token-keyword { color: #cba6f7; font-weight: 600; } /* purple */
        .code-block .token-type { color: #f9e2af; } /* yellow */
        .code-block .token-string { color: #a6e3a1; } /* green */
        .code-block .token-comment { color: #6c7086; font-style: italic; } /* gray */
        .code-block .token-number { color: #fab387; } /* peach */
        .code-block .token-operator { color: #89dceb; } /* cyan */
        .code-block .token-method { color: #89b4fa; } /* blue */
        .code-block .token-class { color: #f9e2af; font-weight: 600; }
        .code-block .token-property { color: #b4befe; } /* lavender */
        .code-block .token-namespace { color: #f38ba8; } /* pink */

        /* C√≥digo inline */
        p code, li code {
            background: #313244;
            color: #cdd6f4;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.9em;
            border: 1px solid #45475a;
        }

        /* Tablas de c√≥digo */
        .code-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin: 16px 0;
        }

        .code-comparison .code-block {
            margin: 0;
        }

        .code-label {
            font-size: 0.8rem;
            color: #6c7086;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #1e40af;
            color: #fff;
            padding: 8px 16px;
            text-decoration: none;
            z-index: 100;
            transition: top 0.3s;
        }
        .skip-link:focus {
            top: 0;
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Saltar al contenido</a>
    <header>
        <h1>Introducci√≥n a ASP.NET Core</h1>
        <div class="subtitle">IF0100 - Lenguaje de Programaci√≥n OO II | Unidad 3</div>
        <div class="meta">Duraci√≥n: 90 minutos</div>
        <div class="meta" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; margin-top: 18px; background: rgba(255,255,255,0.12); padding: 16px; border-radius: 12px;">
            <div>
                <strong>Objetivos</strong>
                <ul style="margin: 8px 0 0 18px;">
                    <li>Entender qu√© es ASP.NET Core.</li>
                    <li>Conocer la arquitectura y middleware pipeline.</li>
                    <li>Crear un primer proyecto web.</li>
                    <li>Implementar Razor Pages b√°sicas.</li>
                    <li>Escribir middleware personalizado.</li>
                </ul>
            </div>
            <div>
                <strong>Prerrequisitos</strong>
                <ul style="margin: 8px 0 0 18px;">
                    <li>Conocimientos b√°sicos de C# y POO.</li>
                    <li>Comprensi√≥n de <abbr title="HTTP: HyperText Transfer Protocol, protocolo de comunicaci√≥n para la World Wide Web que define c√≥mo los mensajes son formateados y transmitidos">HTTP</abbr> (GET, POST, Headers).</li>
                    <li>Windows 10/11 con Visual Studio 2022 o .NET 8 SDK.</li>
                </ul>
            </div>
        </div>
    </header>

    <div class="container" id="main">
        <nav>
            <ul>
                <li><a href="#teoria">Teor√≠a</a></li>
                <li><a href="#ejemplos">Ejemplos</a></li>
                <li><a href="#practica">Pr√°ctica / Laboratorio</a></li>
                <li><a href="#ejercicios">Ejercicios</a></li>
                <li><a href="#referencias">Referencias</a></li>
            </ul>
        </nav>

        <section id="teoria">
        <section id="objetivos">
            <h2>Objetivos y Agenda</h2>
            <table>
                <thead>
                    <tr>
                        <th>Objetivos</th>
                        <th>Agenda (90 min)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1. Entender ASP.NET Core</td><td>15' Qu√© es ASP.NET Core?</td></tr>
                    <tr><td>2. Conocer arquitectura</td><td>20' Arquitectura y Middleware</td></tr>
                    <tr><td>3. Crear primer proyecto</td><td>25' Crear Proyecto</td></tr>
                    <tr><td>4. Razor Pages b√°sico</td><td>20' Razor Pages</td></tr>
                    <tr><td>5. Middleware personalizado</td><td>10' Middleware Custom</td></tr>
                </tbody>
            </table>
        </section>

        <section id="que-es">
            <h2>1. Qu√© es ASP.NET Core?</h2>

            <h3>Definici√≥n</h3>
            <p><strong>ASP.NET Core</strong> es un framework web <strong>cross-platform</strong>, moderno y de alto rendimiento para construir aplicaciones web en la nube.</p>

            <div class="success-box">
                <h4>Caracter√≠sticas Principales:</h4>
                <ul>
                    <li><strong>Cross-platform:</strong> Windows, Linux, macOS</li>
                    <li><strong>Open Source:</strong> C√≥digo disponible en GitHub</li>
                    <li><strong>Alto rendimiento:</strong> Uno de los frameworks m√°s r√°pidos</li>
                    <li><strong>Unificado:</strong> MVC, Web API, Razor Pages, Blazor</li>
                    <li><strong>Moderno:</strong> Soporta async/await, DI integrado</li>
                </ul>
            </div>

            <figure>
                <img src="../assets/infografias/clase-08-aspnet-core.png" alt="Infografia ASP.NET Core - Arquitectura y componentes" onerror="this.onerror=null;this.src='/assets/infografias/clase-08-aspnet-core.png'">
                <figcaption>Figura 1: Arquitectura de ASP.NET Core - El Middleware Pipeline procesa solicitudes HTTP en secuencia (Exception Handler ‚Üí HTTPS Redirection ‚Üí Static Files ‚Üí Routing ‚Üí Authentication ‚Üí Authorization ‚Üí Endpoints), Kestrel es el servidor web multiplataforma incorporado, y el framework ofrece m√∫ltiples opciones de desarrollo (Razor Pages, MVC, Web API, Blazor) para diferentes tipos de aplicaciones.</figcaption>
            </figure>
        </section>

        <section id="arquitectura">
            <h2>2. Arquitectura</h2>

            <h3>Vista General</h3>
            <figure>
              <svg width="100%" viewBox="0 0 760 260" preserveAspectRatio="xMidYMid meet" role="img" aria-labelledby="aspnetTitle">
                <title id="aspnetTitle">Arquitectura ASP.NET Core: Middleware pipeline y servidor Kestrel</title>
                <style>
                  .app{fill:#0b2d6b;rx:8}
                  .pipe{fill:#eef2ff;stroke:#dbeafe;rx:8}
                  .s{font:700 13px Arial, sans-serif; fill:#fff}
                  .p{font:12px Arial, sans-serif; fill:#0b2d6b}
                </style>
                <rect x="40" y="20" width="680" height="56" rx="10" fill="#0b2d6b"/>
                <text x="380" y="54" text-anchor="middle" class="s">ASP.NET CORE APP</text>

                <rect x="80" y="96" width="600" height="120" rx="8" fill="#eef2ff" stroke="#dbeafe"/>
                <text x="380" y="120" text-anchor="middle" class="p">MIDDLEWARE PIPELINE</text>
                <text x="380" y="140" text-anchor="middle" class="p">Exception Handler ¬∑ HTTPS Redirection ¬∑ Static Files ¬∑ Routing ¬∑ Authentication ¬∑ Authorization ¬∑ Custom Middleware ¬∑ Endpoints (MVC/Razor/API)</text>

                <rect x="200" y="230" width="360" height="32" rx="8" fill="#fff" stroke="#dbeafe"/>
                <text x="380" y="252" text-anchor="middle" class="p">KESTREL WEB SERVER</text>
              </svg>
              <figcaption>Arquitectura simplificada de ASP.NET Core: pipeline de middleware que procesa solicitudes, con Kestrel como servidor web subyacente.</figcaption>
            </figure>
            </div> 

            <h3>Componentes Clave</h3>
            <table>
                <thead>
                    <tr>
                        <th>Componente</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>Kestrel</strong></td><td>Servidor web multiplataforma incorporado</td></tr>
                    <tr><td><strong>Middleware Pipeline</strong></td><td>Tuber√≠a de procesamiento de solicitudes</td></tr>
                    <tr><td><strong><abbr title="Dependency Injection: Inyecci√≥n de dependencias, patr√≥n de dise√±o que implementa Inversi√≥n de Control (IoC) para lograr bajo acoplamiento entre componentes">Dependency Injection</abbr></strong></td><td>Contenedor de DI integrado</td></tr>
                    <tr><td><strong>Configuration</strong></td><td>Sistema de configuraci√≥n flexible</td></tr>
                    <tr><td><strong>Logging</strong></td><td>Sistema de logging incorporado</td></tr>
                </tbody>
            </table>
        </section>

        <section id="middleware">
            <h2>3. Middleware Pipeline</h2>

            <h3>¬øQu√© es el Middleware Pipeline?</h3>
            <p>El Middleware Pipeline es una secuencia de componentes que procesan las solicitudes <abbr title="HTTP: HyperText Transfer Protocol, protocolo de comunicaci√≥n para la World Wide Web">HTTP</abbr> entrantes y las respuestas HTTP salientes.</p>

            <div class="highlight-box">
                <h4>¬øPor qu√© el Middleware Pipeline?</h4>
                <p>El patr√≥n Middleware es potente porque permite <strong>componer comportamiento</strong> de forma modular. Cada middleware hace una cosa bien, y el orden determina el comportamiento:</p>
                <ul>
                    <li><strong>Modularidad:</strong> Cada concern (auth, logging, routing) est√° aislado</li>
                    <li><strong>Reutilizable:</strong> Los middlewares se pueden reutilizar entre proyectos</li>
                    <li><strong>Flexible:</strong> Puedes agregar/quitar middlewares sin afectar otros</li>
                    <li><strong>El orden IMPORTA:</strong> Exception handler primero (catch todo), endpoints √∫ltimo (responden)</li>
                </ul>
            </div>

            <h3>Orden T√≠pico de Middleware</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">Program.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29</div>
                    <pre><code class="language-csharp"><span class="token-keyword">var</span> <span class="token-property">app</span> = <span class="token-property">builder</span>.<span class="token-method">Build</span>();

<span class="token-comment">// 1. Exception Handler (primero en ejecutar, √∫ltimo en respuesta)</span>
<span class="token-property">app</span>.<span class="token-method">UseExceptionHandler</span>(<span class="token-string">"/Error"</span>);

<span class="token-comment">// 2. HTTPS Redirection (en desarrollo)</span>
<span class="token-property">app</span>.<span class="token-method">UseHsts</span>();
<span class="token-property">app</span>.<span class="token-method">UseHttpsRedirection</span>();

<span class="token-comment">// 3. Static Files (archivos CSS, JS, im√°genes)</span>
<span class="token-property">app</span>.<span class="token-method">UseStaticFiles</span>();

<span class="token-comment">// 4. Routing (direccionamiento de URLs)</span>
<span class="token-property">app</span>.<span class="token-method">UseRouting</span>();

<span class="token-comment">// 5. Authentication (autenticacion)</span>
<span class="token-property">app</span>.<span class="token-method">UseAuthentication</span>();

<span class="token-comment">// 6. Authorization (autorizacion)</span>
<span class="token-property">app</span>.<span class="token-method">UseAuthorization</span>();

<span class="token-comment">// 7. Custom Middleware (middleware personalizado)</span>
<span class="token-comment">// app.UseMiddleware&lt;TimingMiddleware&gt;();</span>

<span class="token-comment">// 8. Endpoints (terminales)</span>
<span class="token-property">app</span>.<span class="token-method">MapRazorPages</span>();
<span class="token-comment">// app.MapControllerRoute(...);  // Para MVC</span>
<span class="token-comment">// app.MapControllers();           // Para Web API</span>

<span class="token-property">app</span>.<span class="token-method">Run</span>();</code></pre>
                </div>
            </div>

            <div class="highlight-box">
                <h4>Flujo de Solicitud</h4>
                <ol>
                    <li><strong>Request entra:</strong> Exception Handler ‚Üí HTTPS Redirection ‚Üí Static Files...</li>
                    <li><strong><strong>Endpoint</strong>: La solicitud llega al endpoint (Razor Page/MVC/WebAPI)</li>
                    <li><strong>Response sale:</strong> Endpoint ‚Üí ... ‚Üí Static Files ‚Üí Exception Handler</li>
                </ol>
            </div>

            <h3>Middleware Personalizado</h3>
            <p>Puedes crear tu propio middleware para procesamiento personalizado de solicitudes.</p>
        </section>

        <section id="crear-proyecto">
            <h2>4. Crear Proyecto</h2>

            <h3>Comandos CLI</h3>
            <pre><code class="language-bash"># Razor Pages (recomendado para principiantes)
dotnet new webapp -n MiAppWeb

# MVC (Model-View-Controller)
dotnet new mvc -n MiMvcApp

# Web API (para servicios REST)
dotnet new webapi -n MiApi

# Ejecutar proyecto
cd MiAppWeb
dotnet watch run

# Abrir navegador en
# http://localhost:5000</code></pre>

            <h3>Tipos de Proyecto</h3>
            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Uso Recomendado</th>
                        <th>Caracter√≠sticas</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>Razor Pages</strong></td><td>Sitios web tradicionales</td><td>Pages + PageModel, simple</td></tr>
                    <tr><td><strong>MVC</strong></td><td>Aplicaciones complejas</td><td>Controllers + Views, separaci√≥n</td></tr>
                    <tr><td><strong>Web <abbr title="API: Application Programming Interface, interfaz que permite que dos componentes de software se comuniquen entre s√≠">API</abbr></strong></td><td>Servicios <abbr title="REST: Representational State Transfer, estilo arquitect√≥nico para sistemas distribuidos que usa HTTP">REST</abbr></td><td>Controllers, JSON, no vistas</td></tr>
                    <tr><td><strong>Blazor</strong></td><td><abbr title="SPA: Single Page Application, aplicaci√≥n web que cabe en una sola p√°gina y se actualiza din√°micamente sin recargar">SPA</abbr> con C#</td><td><abbr title="WebAssembly: formato binario de instrucciones para una m√°quina virtual basada en stack, permite ejecutar c√≥digo en navegadores a alta velocidad">WebAssembly</abbr> en cliente</td></tr>
                </tbody>
            </table>
        </section>

        <section id="razor-pages">
            <h2>5. Razor Pages</h2>

            <h3>¬øQu√© son Razor Pages?</h3>
            <p><strong>Razor Pages</strong> es un modelo de programaci√≥n orientado a p√°ginas que facilita la creaci√≥n de interfaces web.</p>

            <h3>PageModel (Backend)</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">Index.cshtml.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27</div>
                    <pre><code class="language-csharp"><span class="token-keyword">public class</span> <span class="token-class">IndexModel</span> : <span class="token-type">PageModel</span>
{
    <span class="token-keyword">private readonly</span> <span class="token-type">ILogger</span>&lt;<span class="token-type">IndexModel</span>&gt; <span class="token-property">_logger</span>;

    <span class="token-comment">// Constructor con inyeccion de dependencias</span>
    <span class="token-keyword">public</span> <span class="token-method">IndexModel</span>(<span class="token-type">ILogger</span>&lt;<span class="token-type">IndexModel</span>&gt; logger)
    {
        <span class="token-property">_logger</span> = logger;
    }

    <span class="token-comment">// Propiedad que se muestra en la vista</span>
    <span class="token-keyword">public string</span> <span class="token-property">Mensaje</span> { <span class="token-keyword">get</span>; <span class="token-keyword">set</span>; } = <span class="token-string">"Hola ASP.NET Core!"</span>;

    <span class="token-comment">// Handler GET (cuando se carga la p√°gina)</span>
    <span class="token-keyword">public void</span> <span class="token-method">OnGet</span>()
    {
        <span class="token-property">_logger</span>.<span class="token-method">LogInformation</span>(<span class="token-string">"Cargando p√°gina Index"</span>);
    }

    <span class="token-comment">// Handler POST (cuando se envia formulario)</span>
    <span class="token-keyword">public</span> <span class="token-type">IActionResult</span> <span class="token-method">OnPost</span>()
    {
        <span class="token-keyword">string</span> nombre = <span class="token-type">Request</span>.<span class="token-type">Form</span>[<span class="token-string">"nombre"</span>];
        <span class="token-property">Mensaje</span> = <span class="token-string">$"Formulario enviado: {nombre}"</span>;
        <span class="token-keyword">return</span> <span class="token-method">Page</span>(); <span class="token-comment">// Retornar la misma p√°gina</span>
    }
}</code></pre>
                </div>
            </div>

            <h3>Razor View (Frontend)</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">Index.cshtml</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16</div>
                    <pre><code class="language-html"><span class="token-operator">@page</span>
<span class="token-operator">@model</span> <span class="token-type">IndexModel</span>
<span class="token-operator">@{</span>
    <span class="token-type">ViewData</span>[<span class="token-string">"Title"</span>] = <span class="token-string">"Home Page"</span>;
<span class="token-operator">}</span>

<span class="token-operator">&lt;</span>h1<span class="token-operator">&gt;</span><span class="token-operator">@</span><span class="token-type">Model</span>.<span class="token-property">Mensaje</span><span class="token-operator">&lt;/</span>h1<span class="token-operator">&gt;</span>

<span class="token-operator">&lt;</span>form <span class="token-property">method</span>=<span class="token-string">"post"</span><span class="token-operator">&gt;</span>
    <span class="token-operator">&lt;</span>input <span class="token-property">name</span>=<span class="token-string">"nombre"</span> <span class="token-property">placeholder</span>=<span class="token-string">"Tu nombre"</span> /<span class="token-operator">&gt;</span>
    <span class="token-operator">&lt;</span>button <span class="token-property">type</span>=<span class="token-string">"submit"</span><span class="token-operator">&gt;</span>Enviar<span class="token-operator">&lt;/</span>button<span class="token-operator">&gt;</span>
<span class="token-operator">&lt;/</span>form<span class="token-operator">&gt;</span>

<span class="token-operator">@section</span> <span class="token-type">Scripts</span> {
    <span class="token-operator">@{</span><span class="token-keyword">await</span> <span class="token-method">RenderPartialAsync</span>(<span class="token-string">"_ValidationScriptsPartial"</span>);<span class="token-operator">}</span>
}</code></pre>
                </div>
            </div>

            <h3>Convenciones Razor Pages</h3>
            <table>
                <thead>
                    <tr>
                        <th>Elemento</th>
                        <th>Convencion</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>Archivo PageModel</strong></td><td><code>Nombre.cshtml.cs</code></td></tr>
                    <tr><td><strong>Archivo View</strong></td><td><code>Nombre.cshtml</code></td></tr>
                    <tr><td><strong>Handler GET</strong></td><td><code>OnGet()</code></td></tr>
                    <tr><td><strong>Handler POST</strong></td><td><code>OnPost()</code></td></tr>
                    <tr><td><strong>Handler Async</strong></td><td><code>OnPostAsync()</code></td></tr>
                </tbody>
            </table>
        </section>

        <section id="middleware-custom">
            <h2>6. Middleware Personalizado</h2>

            <h3>Estructura B√°sica</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">TimingMiddleware.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36</div>
                    <pre><code class="language-csharp"><span class="token-keyword">public class</span> <span class="token-class">TimingMiddleware</span>
{
    <span class="token-keyword">private readonly</span> <span class="token-type">RequestDelegate</span> <span class="token-property">_next</span>;
    <span class="token-keyword">private readonly</span> <span class="token-type">ILogger</span>&lt;<span class="token-type">TimingMiddleware</span>&gt; <span class="token-property">_logger</span>;

    <span class="token-keyword">public</span> <span class="token-method">TimingMiddleware</span>(
        <span class="token-type">RequestDelegate</span> next,
        <span class="token-type">ILogger</span>&lt;<span class="token-type">TimingMiddleware</span>&gt; logger)
    {
        <span class="token-property">_next</span> = next;       <span class="token-comment">// Siguiente middleware en pipeline</span>
        <span class="token-property">_logger</span> = logger;
    }

    <span class="token-keyword">public async</span> <span class="token-type">Task</span> <span class="token-method">InvokeAsync</span>(<span class="token-type">HttpContext</span> context)
    {
        <span class="token-keyword">var</span> stopwatch = <span class="token-type">System</span>.<span class="token-type">Diagnostics</span>.<span class="token-type">Stopwatch</span>.<span class="token-method">StartNew</span>();

        <span class="token-keyword">try</span>
        {
            <span class="token-comment">// Pasar al siguiente middleware</span>
            <span class="token-keyword">await</span> <span class="token-property">_next</span>(context);
        }
        <span class="token-keyword">finally</span>
        {
            stopwatch.<span class="token-method">Stop</span>();

            <span class="token-comment">// Log del tiempo de respuesta</span>
            <span class="token-property">_logger</span>.<span class="token-method">LogInformation</span>(
                <span class="token-string">"Request: {Path} - Tiempo: {ElapsedMs}ms - Status: {StatusCode}"</span>,
                context.<span class="token-type">Request</span>.<span class="token-property">Path</span>,
                stopwatch.<span class="token-property">ElapsedMilliseconds</span>,
                context.<span class="token-type">Response</span>.<span class="token-property">StatusCode</span>
            );
        }
    }
}</code></pre>
                </div>
            </div>

            <h3>Registro en Program.cs</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">Program.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6</div>
                    <pre><code class="language-csharp"><span class="token-comment">// Registrar middleware custom</span>
<span class="token-property">app</span>.<span class="token-method">UseMiddleware</span>&lt;<span class="token-type">TimingMiddleware</span>&gt;();

<span class="token-comment">// O como m√©todo de extensi√≥n</span>
<span class="token-comment">// app.UseTiming();</span></code></pre>
                </div>
            </div>

            <h3>Middleware con Condici√≥n</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">AdminOnlyMiddleware.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22</div>
                    <pre><code class="language-csharp"><span class="token-keyword">public class</span> <span class="token-class">AdminOnlyMiddleware</span>
{
    <span class="token-keyword">private readonly</span> <span class="token-type">RequestDelegate</span> <span class="token-property">_next</span>;

    <span class="token-keyword">public</span> <span class="token-method">AdminOnlyMiddleware</span>(<span class="token-type">RequestDelegate</span> next)
    {
        <span class="token-property">_next</span> = next;
    }

    <span class="token-keyword">public async</span> <span class="token-type">Task</span> <span class="token-method">InvokeAsync</span>(<span class="token-type">HttpContext</span> context)
    {
        <span class="token-comment">// Verificar si el usuario es admin</span>
        <span class="token-keyword">if</span> (!context.<span class="token-type">User</span>.<span class="token-method">IsInRole</span>(<span class="token-string">"Admin"</span>))
        {
            context.<span class="token-type">Response</span>.<span class="token-property">StatusCode</span> = <span class="token-number">403</span>;
            <span class="token-keyword">await</span> context.<span class="token-type">Response</span>.<span class="token-method">WriteAsync</span>(<span class="token-string">"Acceso denegado"</span>);
            <span class="token-keyword">return</span>; <span class="token-comment">// Cortar el pipeline</span>
        }

        <span class="token-keyword">await</span> <span class="token-property">_next</span>(context);
    }
}</code></pre>
                </div>
            </div>
        </section>
        </section>

        <section id="ejemplos">
            <h2>Ejemplos</h2>
            <p>Los ejemplos de c√≥digo est√°n integrados en las secciones te√≥ricas anteriores. Consulte cada secci√≥n para ver ejemplos pr√°cticos de:</p>
            <ul>
                <li>Configuraci√≥n de middleware en ASP.NET Core</li>
                <li>Creaci√≥n de proyectos con CLI</li>
                <li>Implementaci√≥n de Razor Pages</li>
                <li>Desarrollo de middleware personalizado</li>
            </ul>
        </section>

        <section id="practica">
            <h2>Pr√°ctica / Laboratorio (35 min)</h2>
            <section class="actividad">
                <h3>Actividad: Laboratorio ASP.NET Core - Primera App Web (35 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Aplicaci√≥n web ASP.NET Core con Razor Pages y middleware</p>
                <p><strong>Tiempo estimado:</strong> 35 min</p>
                <p><strong>Criterios de √©xito:</strong> Soluci√≥n compila, app se ejecuta en navegador, middleware registrado y funcionando</p>
                <div class="success-box">Objetivo: Crear una aplicaci√≥n web ASP.NET Core con Razor Pages y middleware personalizado.</div>

            <h3>Pasos en Windows (Visual Studio 2022)</h3>
            <ol>
                <li>Abrir Visual Studio 2022 y crear un nuevo proyecto.</li>
                <li>Buscar y seleccionar <strong>"ASP.NET Core Web App"</strong> (Razor Pages).</li>
                <li>Nombre del proyecto: <code>MiPracticaWeb</code>.</li>
                <li>Framework: <strong>.NET 8.0</strong> (o la versi√≥n m√°s reciente).</li>
                <li>Click en <strong>Crear</strong>.</li>
                <li>Explorar la estructura del proyecto (Pages, Program.cs, wwwroot).</li>
                <li>Ejecutar con F5 o <strong>Debug > Iniciar Depuraci√≥n</strong>.</li>
            </ol>
            <div class="success-box">Checklist: Soluci√≥n compila sin errores, aplicaci√≥n se ejecuta en navegador, navegador muestra http://localhost:5000 o similar.</div>

            <h3>Crear una Razor Page con Formulario</h3>
            <ol>
                <li>En la carpeta <code>Pages</code>, clic derecho > <strong>Agregar > Nueva Carpeta</strong> llamada <code>Calculadora</code>.</li>
                <li>Clic derecho sobre carpeta Calculadora > <strong>Agregar > Razor Page</strong>.</li>
                <li>Nombre: <code>Index</code>, seleccionar "Generar PageModel class".</li>
                <li>En <code>Calculadora/Index.cshtml.cs</code>, agregar propiedades para los n√∫meros y resultado.</li>
                <li>En <code>Calculadora/Index.cshtml</code>, crear el formulario HTML.</li>
                <li>Ejecutar y probar la calculadora.</li>
            </ol>

            <h3>Crear Middleware Personalizado</h3>
            <div class="code-block">
                <div class="code-header">
                    <div class="code-dots">
                        <span class="code-dot red"></span>
                        <span class="code-dot yellow"></span>
                        <span class="code-dot green"></span>
                    </div>
                    <span class="code-title">TimingMiddleware.cs</span>
                </div>
                <div class="code-content">
                    <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19</div>
                    <pre><code class="language-csharp"><span class="token-comment">// Agregar al proyecto: TimingMiddleware.cs</span>
<span class="token-keyword">public class</span> <span class="token-class">TimingMiddleware</span>
{
    <span class="token-keyword">private readonly</span> <span class="token-type">RequestDelegate</span> <span class="token-property">_next</span>;
    <span class="token-keyword">private readonly</span> <span class="token-type">ILogger</span>&lt;<span class="token-type">TimingMiddleware</span>&gt; <span class="token-property">_logger</span>;

    <span class="token-keyword">public</span> <span class="token-method">TimingMiddleware</span>(<span class="token-type">RequestDelegate</span> next, <span class="token-type">ILogger</span>&lt;<span class="token-type">TimingMiddleware</span>&gt; logger)
    {
        <span class="token-property">_next</span> = next;
        <span class="token-property">_logger</span> = logger;
    }

    <span class="token-keyword">public async</span> <span class="token-type">Task</span> <span class="token-method">InvokeAsync</span>(<span class="token-type">HttpContext</span> context)
    {
        <span class="token-keyword">var</span> watch = <span class="token-type">System</span>.<span class="token-type">Diagnostics</span>.<span class="token-type">Stopwatch</span>.<span class="token-method">StartNew</span>();
        <span class="token-keyword">await</span> <span class="token-property">_next</span>(context);
        watch.<span class="token-method">Stop</span>();
        <span class="token-property">_logger</span>.<span class="token-method">LogInformation</span>(<span class="token-string">$"Request: {context.Request.Path} tom√≥ {watch.ElapsedMilliseconds}ms"</span>);
    }
}</code></pre>
                </div>
            </div>
            <ol>
                <li>En <code>Program.cs</code>, registrar el middleware antes de <code>app.Run()</code>.</li>
                <li>Ejecutar y verificar los logs en la ventana de Output.</li>
            </ol>
            <div class="success-box">Checklist: Middleware registrado correctamente, logs muestran tiempo de respuesta, no hay errores de compilaci√≥n.</div>
        </section>

        <section id="ejercicios">
            <h2>8. Ejercicios Pr√°cticos</h2>

            <section class="actividad">
                <h3>Actividad: Ejercicio 1 - P√°gina de Calculadora (20 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Razor Page con calculadora funcional</p>
                <p><strong>Tiempo estimado:</strong> 20 min</p>
                <p><strong>Criterios de √©xito:</strong> Razor Page creada, formulario funcional, operaciones correctas, validaci√≥n de divisi√≥n por cero</p>
                <p><strong>Objetivo:</strong> Crear una Razor Page con calculadora b√°sica.</p>
            <ul>
                <li>Formulario con dos inputs num√©ricos</li>
                <li>Botones para Sumar, Restar, Multiplicar, Dividir</li>
                <li>Manejar GET (mostrar) y POST (calcular)</li>
                <li>Validar divisi√≥n por cero</li>
            </ul>
            <div class="success-box">Checklist: Razor Page creada, formulario funcional, operaciones correctas, validaci√≥n de divisi√≥n por cero implementada.</div>

            <section class="actividad">
                <h3>Actividad: Ejercicio 2 - Middleware de Timing (15 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Middleware personalizado de timing</p>
                <p><strong>Tiempo estimado:</strong> 15 min</p>
                <p><strong>Criterios de √©xito:</strong> Middleware creado y registrado, tiempo medido correctamente, logs visibles en Output</p>
                <p><strong>Objetivo:</strong> Middleware que mide tiempo de respuesta.</p>
            <ul>
                <li>Cronometrar cada solicitud</li>
                <li>Mostrar tiempo en header de respuesta</li>
                <li>Log de solicitudes lentas (>1 segundo)</li>
            </ul>
            <div class="success-box">Checklist: Middleware creado y registrado, tiempo medido correctamente, logs visibles en Output.</div>

            <section class="actividad">
                <h3>Actividad: Ejercicio 3 - P√°gina con Validaci√≥n (25 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Razor Page con formulario validado</p>
                <p><strong>Tiempo estimado:</strong> 25 min</p>
                <p><strong>Criterios de √©xito:</strong> Validaciones implementadas, mensajes de error visibles, formulario rechaza datos inv√°lidos</p>
                <p><strong>Objetivo:</strong> Formulario con validaciones.</p>
            <ul>
                <li>Nombre requerido</li>
                <li>Email formato v√°lido</li>
                <li>Edad entre 18 y 100</li>
                <li>Mensajes de error en pantalla</li>
            </ul>
            <div class="success-box">Checklist: Validaciones implementadas, mensajes de error visibles, formulario rechaza datos inv√°lidos.</div>
            <div class="success-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left-color: #f59e0b;">Tiempo sugerido total: 60 min (20 + 15 + 25).</div>
        </section>

        <section class="evaluacion-calificable">
            <h3>üìã Evaluaci√≥n programada</h3>
            <p><strong>Detalle:</strong> Consultar plataforma del curso para informaci√≥n completa sobre evaluaci√≥n calificable.</p>
        </section>

        <section id="resumen">
            <h2>Resumen de la Clase</h2>

            <h3>Conceptos Clave Aprendidos</h3>
            <table>
                <thead>
                    <tr>
                        <th>Tema</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>ASP.NET Core</strong></td><td>Framework web cross-platform moderno</td></tr>
                    <tr><td><strong>Kestrel</strong></td><td>Servidor web incorporado</td></tr>
                    <tr><td><strong>Middleware Pipeline</strong></td><td>Tuber√≠a de procesamiento de solicitudes</td></tr>
                    <tr><td><strong>Razor Pages</strong></td><td>Modelo de p√°ginas simple</td></tr>
                    <tr><td><strong>PageModel</strong></td><td>Backend con handlers OnGet/OnPost</td></tr>
                    <tr><td><strong>Dependency Injection</strong></td><td>Contenedor DI integrado</td></tr>
                </tbody>
            </table>

            <h3>Habilidades Adquiridas</h3>
            <ul>
                <li>Crear proyecto ASP.NET Core</li>
                <li>Configurar Middleware Pipeline</li>
                <li>Crear Razor Pages con handlers</li>
                <li>Implementar middleware personalizado</li>
                <li>Usar inyeccion de dependencias</li>
            </ul>

            <h3>Pr√≥ximos Pasos</h3>
            <ul>
                <li><strong>Clase 9:</strong> HTML5 y Bootstrap</li>
                <li>Practicar creando proyectos reales</li>
                <li>Explorar MVC vs Razor Pages</li>
            </ul>

            <h3>Referencias y Recursos</h3>
            <ul>
                <li><strong>Documentaci√≥n oficial de ASP.NET Core:</strong> <a href="https://learn.microsoft.com/en-us/aspnet/core/" target="_blank" rel="noopener">https://learn.microsoft.com/en-us/aspnet/core/</a></li>
                <li><strong>Tutorial de Razor Pages:</strong> <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/" target="_blank" rel="noopener">Introduction to Razor Pages</a></li>
                <li><strong>Middleware en ASP.NET Core:</strong> <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/middleware/" target="_blank" rel="noopener">ASP.NET Core Middleware</a></li>
                <li><strong>Inyecci√≥n de Dependencias:</strong> <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection" target="_blank" rel="noopener">Dependency Injection in ASP.NET Core</a></li>
                <li><strong>Kestrel Web Server:</strong> <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel" target="_blank" rel="noopener">Kestrel Web Server</a></li>
            </ul>
        </section>

        <section id="referencias">
            <h2>Referencias</h2>
            <ul>
                <li><strong>Documentaci√≥n oficial de ASP.NET Core:</strong> <a href="https://docs.microsoft.com/aspnet/core" target="_blank" rel="noopener">docs.microsoft.com/aspnet/core</a></li>
                <li><strong>Introducci√≥n a Razor Pages:</strong> <a href="https://docs.microsoft.com/aspnet/core/razor-pages" target="_blank" rel="noopener">Razor Pages documentation</a></li>
                <li><strong>Middleware en ASP.NET Core:</strong> <a href="https://docs.microsoft.com/aspnet/core/fundamentals/middleware" target="_blank" rel="noopener">Middleware documentation</a></li>
                <li><strong>Tutoriales oficiales Microsoft:</strong> <a href="https://docs.microsoft.com/aspnet/core/tutorials" target="_blank" rel="noopener">ASP.NET Core tutorials</a></li>
            </ul>
        </section>
    </div>

    <a href="#inicio" class="back-to-top">&uarr;</a>

    <footer>
        <p><strong>IF0100 - Lenguaje de Programaci√≥n OO II</strong></p>
        <p>UNAULA - Ingenier√≠a Inform√°tica - 2026-I</p>
        <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
            Contacto: [correo del docente] | Repositorio: [enlace del curso]
        </p>
    </footer>
</body>
</html>
