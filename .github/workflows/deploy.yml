name: Deploy Clases HTML to GitHub Pages

on:
  push:
    branches: [ main, generate-clases-html-2026-02-01 ]
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create output directory
        run: mkdir -p output

      - name: Copy clases HTML
        run: |
          cp -r clases-html/*.html output/ 2>/dev/null || true

      - name: Copy assets
        run: |
          mkdir -p output/assets/infografias
          cp -r assets/infografias/* output/assets/infografias/ 2>/dev/null || true

      - name: Create index
        run: |
          cat > output/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="es">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>IF0100 - POO II | Clases</title>
            <style>
              :root {
                --bg: #f7f7f4;
                --ink: #1f2933;
                --brand: #1e3a8a;
                --accent: #3b82f6;
                --card: #ffffff;
                --line: #d9e2ec;
              }
              * { box-sizing: border-box; }
              body {
                margin: 0;
                font-family: "IBM Plex Sans", "Segoe UI", Tahoma, sans-serif;
                color: var(--ink);
                background: var(--bg);
                line-height: 1.65;
              }
              .container {
                max-width: 1100px;
                margin: 0 auto;
                padding: 20px;
              }
              header {
                background: linear-gradient(135deg, #0b2d6b, #1e40af);
                color: #fff;
                padding: 36px 20px 28px;
                border-radius: 12px;
                margin-bottom: 24px;
              }
              header h1 {
                font-family: "Merriweather", Georgia, serif;
                margin: 8px 0 10px;
                font-size: 2.2rem;
              }
              header .subtitle {
                opacity: 0.9;
                margin-top: 8px;
              }
              .classes-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 16px;
              }
              .class-card {
                background: var(--card);
                border: 1px solid var(--line);
                border-radius: 12px;
                padding: 16px;
                transition: transform 0.2s, box-shadow 0.2s;
                text-decoration: none;
                color: inherit;
                display: block;
              }
              .class-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(0,0,0,0.1);
                border-color: var(--accent);
              }
              .class-number {
                font-size: 0.85rem;
                color: var(--muted);
                text-transform: uppercase;
                letter-spacing: 0.5px;
              }
              .class-title {
                font-size: 1.1rem;
                font-weight: 600;
                color: var(--brand);
                margin: 8px 0 6px;
              }
              .class-desc {
                font-size: 0.9rem;
                color: var(--muted);
                line-height: 1.5;
              }
              .unit-section {
                margin-bottom: 32px;
              }
              .unit-title {
                font-size: 1.4rem;
                color: var(--brand);
                border-bottom: 2px solid var(--accent);
                padding-bottom: 8px;
                margin-bottom: 16px;
              }
            </style>
          </head>
          <body>
            <div class="container">
              <header>
                <h1>IF0100 - POO II</h1>
                <p class="subtitle">Lenguaje de Programaci贸n Orientada a Objetos II | UNAULA - 2026-I</p>
              </header>

              <div class="unit-section">
                <h2 class="unit-title"> Clases</h2>
                <div class="classes-grid">
                  <a href="clase-01.html" class="class-card">
                    <span class="class-number">Clase 01</span>
                    <span class="class-title">Introducci贸n a C# y .NET</span>
                    <span class="class-desc">Historia, ecosistema y estructura de programas</span>
                  </a>
                  <a href="clase-02.html" class="class-card">
                    <span class="class-number">Clase 02</span>
                    <span class="class-title">Clases y Objetos</span>
                    <span class="class-desc">Miembros, encapsulamiento y propiedades</span>
                  </a>
                  <a href="clase-03.html" class="class-card">
                    <span class="class-number">Clase 03</span>
                    <span class="class-title">Herencia</span>
                    <span class="class-desc">Relaci贸n es-un, base y derivada</span>
                  </a>
                  <a href="clase-04.html" class="class-card">
                    <span class="class-number">Clase 04</span>
                    <span class="class-title">Polimorfismo</span>
                    <span class="class-desc">Sobrecarga, sobreescritura y virtual</span>
                  </a>
                  <a href="clase-05.html" class="class-card">
                    <span class="class-number">Clase 05</span>
                    <span class="class-title">TDD - Desarrollo Guiado por Pruebas</span>
                    <span class="class-desc">Ciclo rojo-verde-refactor, pyramid testing</span>
                  </a>
                  <a href="clase-06.html" class="class-card">
                    <span class="class-number">Clase 06</span>
                    <span class="class-title">BDD - Desarrollo Guiado por Comportamiento</span>
                    <span class="class-desc">Given-When-Then, especificaciones</span>
                  </a>
                  <a href="clase-07.html" class="class-card">
                    <span class="class-number">Clase 07</span>
                    <span class="class-title">DDD - Dise帽o Guiado por Dominio</span>
                    <span class="class-desc">Ubicuos language, bounded contexts</span>
                  </a>
                  <a href="clase-08.html" class="class-card">
                    <span class="class-number">Clase 08</span>
                    <span class="class-title">Introducci贸n a ASP.NET Core</span>
                    <span class="class-desc">Middleware, pipeline, request/response</span>
                  </a>
                  <a href="clase-09.html" class="class-card">
                    <span class="class-number">Clase 09</span>
                    <span class="class-title">Razor Pages</span>
                    <span class="class-desc">Pages, ViewModels, Tag Helpers</span>
                  </a>
                  <a href="clase-10.html" class="class-card">
                    <span class="class-number">Clase 10</span>
                    <span class="class-title">ASP.NET Core MVC</span>
                    <span class="class-desc">Controllers, Views, Models</span>
                  </a>
                  <a href="clase-11.html" class="class-card">
                    <span class="class-number">Clase 11</span>
                    <span class="class-title">Validaci贸n y Helpers</span>
                    <span class="class-desc">Data Annotations, validaci贸n modelo</span>
                  </a>
                  <a href="clase-12.html" class="class-card">
                    <span class="class-number">Clase 12</span>
                    <span class="class-title">ADO.NET - Conectado</span>
                    <span class="class-desc">Connection, Command, DataReader</span>
                  </a>
                  <a href="clase-13.html" class="class-card">
                    <span class="class-number">Clase 13</span>
                    <span class="class-title">ADO.NET - Desconectado</span>
                    <span class="class-desc">DataSet, DataTable,DataAdapter</span>
                  </a>
                  <a href="clase-14.html" class="class-card">
                    <span class="class-number">Clase 14</span>
                    <span class="class-title">Entity Framework Core</span>
                    <span class="class-desc">ORM, DbContext, LINQ to Entities</span>
                  </a>
                  <a href="clase-15.html" class="class-card">
                    <span class="class-number">Clase 15</span>
                    <span class="class-title">Proyecto Final - Parte 1</span>
                    <span class="class-desc">Integraci贸n, arquitectura y dise帽o</span>
                  </a>
                  <a href="clase-16.html" class="class-card">
                    <span class="class-number">Clase 16</span>
                    <span class="class-title">Proyecto Final - Parte 2</span>
                    <span class="class-desc">Conclusiones y presentaciones</span>
                  </a>
                  <a href="clase-17.html" class="class-card">
                    <span class="class-number">Clase 17</span>
                    <span class="class-title">Evaluaci贸n Final</span>
                    <span class="class-desc">Sustentaciones y cierre</span>
                  </a>
                </div>
              </div>
            </div>
          </body>
          </html>
          EOF

      - name: Deploy to gh-pages branch
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./output
          publish_branch: gh-pages
