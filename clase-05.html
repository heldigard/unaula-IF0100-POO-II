<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 05 - TDD y Pruebas Unitarias | IF0100 - POO II</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.85;
        }

        nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav h2 {
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        nav .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }

        nav a {
            display: block;
            padding: 10px 15px;
            color: #1e3a8a;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }

        nav a:hover {
            background: #e0e7ff;
        }

        section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h2 {
            color: #1e40af;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3b82f6;
        }

        h3 {
            color: #1e3a8a;
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        h4 {
            color: #3b82f6;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #e5e7eb;
        }

        th {
            background: #1e40af;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9fafb;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        pre code {
            color: inherit;
        }

        p code, li code {
            background: #e0e7ff;
            color: #1e40af;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .diagram {
            font-family: 'Consolas', 'Monaco', monospace;
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px solid #e5e7eb;
        }

        figure {
            margin: 30px 0;
            text-align: center;
        }

        figure img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        figcaption {
            margin-top: 15px;
            font-style: italic;
            color: #64748b;
            font-size: 0.95em;
        }

        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-table > div {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .comparison-table h4 {
            color: #1e40af;
            margin-top: 0;
        }

        .highlight-box {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #1e40af;
            margin: 20px 0;
        }

        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin: 20px 0;
        }

        .success-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
            margin: 20px 0;
        }

        ul, ol {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #1e40af;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(30, 64, 175, 0.4);
            transition: transform 0.3s;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
        }

        footer {
            background: #1e293b;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
        }

        .note {
            background: #f0f4ff;
            border-left: 4px solid #3b82f6;
            padding: 10px 12px;
            border-radius: 8px;
            color: #52606d;
        }

        /* Syntax highlighting para C# */
        .token-keyword { color: #c792ea; font-weight: 600; }
        .token-type { color: #ffcb6b; }
        .token-string { color: #c3e88d; }
        .token-comment { color: #546e7a; font-style: italic; }
        .token-number { color: #f78c6c; }
        .token-operator { color: #89ddff; }

        /* Accessibility */
        abbr[title] { text-decoration: underline dotted; cursor: help; }

        /* Print styles */
        @media print {
            header, nav, footer { background: white !important; color: black !important; }
            a[href]:after { content: " (" attr(href) ")"; font-size: 0.8em; }
            pre, code { white-space: pre-wrap; }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .comparison-table {
                grid-template-columns: 1fr;
            }

            section {
                padding: 20px;
            }
        }
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #1e40af;
            color: #fff;
            padding: 8px 16px;
            text-decoration: none;
            z-index: 100;
            transition: top 0.3s;
        }
        .skip-link:focus {
            top: 0;
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Saltar al contenido</a>
    <header>
        <h1>TDD y Pruebas Unitarias</h1>
        <div class="subtitle">IF0100 - Lenguaje de Programaci√≥n OO II | 4.¬∫ Semestre - Ingenier√≠a Inform√°tica</div>
        <div class="meta">Duraci√≥n: 90 minutos | Semana 5</div>
    </header>

    <div class="container" id="main">
        <nav id="inicio">
            <h2>Tabla de Contenidos</h2>
            <div class="toc-grid">
                <a href="#objetivos">Objetivos y Agenda</a>
                <a href="#que-es-tdd">Qu√© es TDD?</a>
                <a href="#ciclo-tdd">Ciclo Red-Green-Refactor</a>
                <a href="#xunit">xUnit Framework</a>
                <a href="#patron-aaa">Patr√≥n AAA</a>
                <a href="#test-doubles">Test Doubles</a>
                <a href="#ejemplos">Ejemplos Completos</a>
                <a href="#practica">Pr√°ctica / Laboratorio</a>
                <a href="#ejercicios">Ejercicios Pr√°cticos</a>
                <a href="#resumen">Resumen</a>
            </div>
        </nav>

        <section id="objetivos">
            <h2>Objetivos y Agenda</h2>
            <table>
                <thead>
                    <tr>
                        <th>Objetivos</th>
                        <th>Agenda (90 min)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1. Entender TDD</td><td>20' Qu√© es TDD?</td></tr>
                    <tr><td>2. Usar xUnit</td><td>25' xUnit Framework</td></tr>
                    <tr><td>3. Aplicar patr√≥n AAA</td><td>20' Patr√≥n AAA</td></tr>
                    <tr><td>4. Conocer Test Doubles</td><td>15' Test Doubles</td></tr>
                    <tr><td>5. Practicar con ejemplos</td><td>10' Ejercicios</td></tr>
                </tbody>
            </table>
            <div class="highlight-box">
                <h4>Prerrequisitos</h4>
                <ul>
                    <li>Visual Studio 2022 Community instalado (Windows 10/11).</li>
                    <li>.NET 8 SDK (incluido con VS) y conocimientos b√°sicos de C#.</li>
                    <li>Acceso a consola o terminal integrada de Visual Studio.</li>
                </ul>
            </div>
        </section>

        <section id="que-es-tdd">
            <h2>1. Qu√© es TDD?</h2>

            <h3>Test-Driven Development (TDD)</h3>
            <p><strong><abbr title="Test-Driven Development: Desarrollo guiado por pruebas, pr√°ctica de escribir pruebas antes del c√≥digo de producci√≥n">TDD</abbr></strong> es una pr√°ctica de desarrollo donde se escriben las pruebas <strong>ANTES</strong> del c√≥digo de producci√≥n.</p>

            <div class="highlight-box">
                <h4>¬øPor qu√© "Unit Tests" o Pruebas Unitarias?</h4>
                <p>Las <strong><abbr title="Unit test: Prueba automatizada que verifica una peque√±a unidad de c√≥digo (m√©todo o clase) de forma aislada">pruebas unitarias</abbr></strong> (unit tests) son pruebas automatizadas que verifican una peque√±a porci√≥n de c√≥digo ‚Äî t√≠picamente un solo m√©todo o clase ‚Äî de forma aislada de sus dependencias externas. Se llaman "unit" (unidad) porque prueban la unidad m√°s peque√±a de funcionalidad posible.</p>
                <p>Las pruebas unitarias son importantes porque:</p>
                <ul>
                    <li><strong>Detecci√≥n temprana:</strong> Encuentran bugs durante el desarrollo, no en producci√≥n</li>
                    <li><strong>Documentaci√≥n viva:</strong> Muestran c√≥mo se debe usar el c√≥digo</li>
                    <li><strong>Refactorizaci√≥n segura:</strong> Permiten cambiar c√≥digo sin miedo a romper funcionalidad</li>
                    <li><strong>Dise√±o mejor:</strong> C√≥digo testeable suele tener mejor dise√±o</li>
                </ul>
            </div>

            <figure>
                <img src="../assets/infografias/clase-05-tdd-ciclo.png" alt="Ciclo TDD Red-Green-Refactor">
                <figcaption>Figura 1: Ciclo de TDD Red-Green-Refactor - el flujo iterativo donde primero se escribe una prueba que falla (Red), luego se implementa el c√≥digo m√≠nimo para pasarla (Green), y finalmente se refactoriza para mejorar el dise√±o sin cambiar el comportamiento (Refactor), repiti√©ndose este ciclo continuamente para construir software de calidad incremental.</figcaption>
            </figure>

            <h3>Por qu√© TDD?</h3>
            <div class="success-box">
                <h4>Beneficios:</h4>
                <ul>
                    <li><strong>C√≥digo m√°s confiable:</strong> Las pruebas garantizan funcionalidad</li>
                    <li><strong>Mejor dise√±o:</strong> Pensar en pruebas primero mejora el dise√±o</li>
                    <li><strong>Refactorizaci√≥n segura:</strong> Las pruebas protegen contra regresiones</li>
                    <li><strong>Documentaci√≥n viva:</strong> Las pruebas documentan el comportamiento</li>
                </ul>
            </div>
        </section>

        <section id="ciclo-tdd">
            <h2>2. Ciclo Red-Green-Refactor</h2>

            <h3>El Ciclo de TDD</h3>
            <div class="diagram">
<pre>
üî¥ RED     ‚Üí Escribir prueba que falla
              (El c√≥digo a√∫n no existe)

üü¢ GREEN   ‚Üí C√≥digo m√≠nimo para pasar
              (Implementaci√≥n b√°sica)

üîµ REFACTOR ‚Üí Eliminar duplicaci√≥n
              (Mejorar dise√±o)

üîÅ REPEAT  ‚Üí Siguiente prueba
              (Continuar ciclo...)
</pre>
            </div>

            <h3>Las Tres Leyes de TDD (Uncle Bob Martin)</h3>
            <div class="highlight-box">
                <ol>
                    <li><strong>No escribir√°s c√≥digo de producci√≥n</strong> hasta haber escrito una prueba que falle</li>
                    <li><strong>No escribir√°s m√°s de una prueba</strong> suficiente para fallar (y compilar)</li>
                    <li><strong>No escribir√°s m√°s c√≥digo</strong> del necesario para pasar la prueba</li>
                </ol>
            </div>
        </section>

        <section id="xunit">
            <h2>3. xUnit Framework</h2>

            <h3>Qu√© es xUnit?</h3>
            <p><strong><abbr title="xUnit: Framework de pruebas unitarias para .NET, open source, creado por los inventores originales de NUnit">xUnit</abbr></strong> es un framework de pruebas unitarias para .NET. Es open source y ampliamente utilizado en la comunidad .NET.</p>

            <h3>Atributos Principales</h3>
            <table>
                <thead>
                    <tr>
                        <th>Atributo</th>
                        <th>Uso</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>[Fact]</code></td><td>Prueba sin par√°metros</td><td>Un caso de prueba espec√≠fico</td></tr>
                    <tr><td><code>[Theory]</code></td><td>Prueba parametrizada</td><td>M√∫ltiples casos con datos diferentes</td></tr>
                    <tr><td><code>[InlineData(...)]</code></td><td>Datos para [Theory]</td><td>Proporciona valores para los par√°metros</td></tr>
                </tbody>
            </table>

            <h3>Instalaci√≥n (CLI)</h3>
            <pre><code class="language-bash"># Crear proyecto de pruebas
dotnet new xunit -n MiProyecto.Tests

# Agregar referencia al proyecto principal
cd MiProyecto.Tests
dotnet add reference ../MiProyecto/MiProyecto.csproj

# Ejecutar pruebas
dotnet test</code></pre>

            <figure>
                <img src="../assets/infografias/clase-05-testing-pyramid.png" alt="Testing Pyramid - Unit, Integration, E2E Tests">
                <figcaption>Figura 2: Pir√°mide de Testing - estrategia de estratificaci√≥n de pruebas donde la base amplia contiene muchas pruebas unitarias r√°pidas y aisladas, el nivel intermedio tiene menos pruebas de integraci√≥n que verifican interacciones entre componentes, y la cima contiene muy pocas pruebas end-to-end lentas pero cr√≠ticas, equilibrando cobertura, velocidad y costo de mantenimiento.</figcaption>
            </figure>
        </section>

        <section id="patron-aaa">
            <h2>4. Patr√≥n AAA (Arrange-Act-Assert)</h2>

            <h3>Qu√© es el Patr√≥n AAA?</h3>
            <p>Es un patr√≥n est√°ndar para escribir pruebas unitarias organizadas en tres secciones claras. <strong><abbr title="Arrange-Act-Assert: Patr√≥n para estructurar pruebas (Preparar-Ejecutar-Verificar)">AAA</abbr></strong> significa:</p>
            <ul>
                <li><strong>Arrange (Preparar):</strong> Configurar objetos, variables y condiciones iniciales</li>
                <li><strong>Act (Ejecutar):</strong> Llamar al m√©todo que se est√° probando</li>
                <li><strong>Assert (Verificar):</strong> Comprobar que el resultado es el esperado</li>
            </ul>

            <div class="highlight-box">
                <h4>¬øPor qu√© seguir el patr√≥n AAA?</h4>
                <p>El patr√≥n AAA hace que las pruebas sean m√°s <strong>legibles</strong>, <strong>mantenibles</strong> y <strong>consistentes</strong>. Al seguir siempre la misma estructura:</p>
                <ul>
                    <li><strong>Facilita lectura:</strong> Cualquier desarrollador puede entender r√°pidamente qu√© hace la prueba</li>
                    <li><strong>Reduce errores:</strong> Separar claramente preparaci√≥n, ejecuci√≥n y verificaci√≥n evita mezclar conceptos</li>
                    <li><strong>Consistencia:</strong> Todas las pruebas tienen el mismo "look & feel"</li>
                    <li><strong>Debugging m√°s f√°cil:</strong> Si falla, sabes exactamente en qu√© fase ocurri√≥ el problema</li>
                </ul>
            </div>

            <div class="warning-box">
                <h4>Errores Comunes en Pruebas Unitarias</h4>
                <ul>
                    <li><strong>Probar demasiadas cosas en una prueba:</strong> Una prueba debe verificar UNA sola cosa. Si prueba m√∫ltiples comportamientos, div√≠dela.</li>
                    <li><strong>Probar detalles de implementaci√≥n:</strong> Prueba el <strong>comportamiento</strong> observable, no c√≥mo est√° implementado internamente.</li>
                    <li><strong>Pruebas fr√°giles:</strong> Las pruebas que se rompen con cambios inocentes en el c√≥digo est√°n probando detalles de implementaci√≥n.</li>
                    <li><strong>No seguir AAA:</strong> Mezclar preparaci√≥n con ejecuci√≥n hace las pruebas dif√≠ciles de leer y mantener.</li>
                    <li><strong>Dependencias externas:</strong> Las pruebas unitarias deben ser aisladas. Si depende de base de datos o API externa, usa Test Doubles.</li>
                </ul>
            </div>

            <div class="diagram">
              <figure>
                <svg width="100%" viewBox="0 0 720 220" preserveAspectRatio="xMidYMid meet" role="img" aria-labelledby="aaaTitle">
                  <title id="aaaTitle">Patr√≥n AAA: Arrange, Act, Assert</title>
                  <style>
                    .box{fill:#fff;stroke:#dbeafe;rx:8}
                    .h{font:700 13px Arial, sans-serif; fill:#0b2d6b}
                    .s{font:12px Arial, sans-serif; fill:#475569}
                  </style>
                  <rect x="60" y="40" width="160" height="80" rx="8" fill="#fff" stroke="#dbeafe"/>
                  <text x="140" y="66" text-anchor="middle" class="h">ARRANGE</text>
                  <text x="140" y="86" text-anchor="middle" class="s">Configurar / Crear objetos</text>

                  <rect x="280" y="40" width="160" height="80" rx="8" fill="#fff" stroke="#dbeafe"/>
                  <text x="360" y="66" text-anchor="middle" class="h">ACT</text>
                  <text x="360" y="86" text-anchor="middle" class="s">Ejecutar / Llamar m√©todo</text>

                  <rect x="500" y="40" width="160" height="80" rx="8" fill="#fff" stroke="#dbeafe"/>
                  <text x="580" y="66" text-anchor="middle" class="h">ASSERT</text>
                  <text x="580" y="86" text-anchor="middle" class="s">Verificar resultado</text>

                  <path d="M220 100 L280 100" stroke="#0b2d6b" stroke-width="2"/>
                  <path d="M460 100 L500 100" stroke="#0b2d6b" stroke-width="2"/>
                </svg>
                <figcaption>Patr√≥n AAA: preparar (Arrange), ejecutar (Act) y verificar (Assert) ‚Äî flujo recomendado para tests unitarios legibles y mantenibles.</figcaption>
              </figure>
            </div>

            <h3>Ejemplo Completo</h3>
            <pre><code class="language-csharp">[Fact]
public void Sumar_DosNumeros_RetornaSuma()
{
    // Arrange - Configurar
    var calc = new Calculadora();
    int esperado = 8;

    // Act - Ejecutar
    int resultado = calc.Sumar(5, 3);

    // Assert - Verificar
    Assert.Equal(esperado, resultado);
}</code></pre>

            <h3>M√©todos Assert Comunes</h3>
            <table>
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Uso</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><code>Equal()</code></td><td>Compara igualdad</td><td><code>Assert.Equal(8, resultado)</code></td></tr>
                    <tr><td><code>True()/False()</code></td><td>Booleano</td><td><code>Assert.True(condicion)</code></td></tr>
                    <tr><td><code>NotNull()</code></td><td>No es null</td><td><code>Assert.NotNull(obj)</code></td></tr>
                    <tr><td><code>Throws()</code></td><td>Excepci√≥n esperada</td><td><code>Assert.Throws&lt;Exception&gt;(() => metodo())</code></td></tr>
                    <tr><td><code>Contains()</code></td><td>Colecci√≥n contiene</td><td><code>Assert.Contains(lista, valor)</code></td></tr>
                </tbody>
            </table>
        </section>

        <section id="test-doubles">
            <h2>5. Test Doubles</h2>

            <h3>Qu√© son los Test Doubles?</h3>
            <p>Son objetos sustitutos usados en pruebas para simular dependencias externas o complejas. El t√©rmino <strong><abbr title="Test Double: Objeto sustituto usado en pruebas para simular dependencias (como un doble de cine act√∫a por el actor real)">Test Double</abbr></strong> viene del concepto de "doble de cine" ‚Äî alguien que reemplaza al actor real en escenas peligrosas.</p>

            <div class="highlight-box">
                <h4>¬øPor qu√© necesitamos Test Doubles?</h4>
                <p>En pruebas unitarias queremos aislar la unidad bajo prueba. Sin embargo, la mayor√≠a de las clases tienen <strong>dependencias</strong> (base de datos, APIs web, sistemas de archivos, etc.). Los Test Doubles nos permiten:</p>
                <ul>
                    <li><strong>Aislar la prueba:</strong> Probar solo la clase que nos interesa, no sus dependencias</li>
                    <li><strong>Velocidad:</strong> Evitar llamadas lentas a base de datos o servicios externos</li>
                    <li><strong>Control:</strong> Simular cualquier escenario (errores, timeouts, datos espec√≠ficos)</li>
                    <li><strong>Reproducibilidad:</strong> Las pruebas no dependen de estados externos variables</li>
                </ul>
            </div>

            <h3>Tipos de Test Doubles</h3>
            <table>
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Prop√≥sito</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Dummy</strong></td>
                        <td>Llena par√°metros, sin uso real</td>
                        <td>Objeto vac√≠o para cumplir firma</td>
                    </tr>
                    <tr>
                        <td><strong>Stub</strong></td>
                        <td>Respuestas predefinidas</td>
                        <td>Siempre retorna "hola"</td>
                    </tr>
                    <tr>
                        <td><strong>Fake</strong></td>
                        <td>Implementaci√≥n simplificada</td>
                        <td>Repository con lista en memoria</td>
                    </tr>
                    <tr>
                        <td><strong>Mock</strong></td>
                        <td>Verifica comportamiento</td>
                        <td>Confirma que se llam√≥ al m√©todo</td>
                    </tr>
                </tbody>
            </table>

            <h3>Cu√°ndo usar cada uno?</h3>
            <div class="comparison-table">
                <div>
                    <h4>Dummy</h4>
                    <pre><code class="language-csharp">// Solo para llenar par√°metros
public void Probar(DummyServicio servicio) {
    // El servicio no se usa
}</code></pre>
                    <p><em>Usar cuando no necesitas interactuar con el objeto.</em></p>
                </div>
                <div>
                    <h4>Stub</h4>
                    <pre><code class="language-csharp">// Respuestas predefinidas
var stub = new StubRepo();
stub.Obtener(1).Returns(new Estudiante());

// Test usa el stub
var estudiante = repo.Obtener(1);</code></pre>
                    <p><em>Usar cuando necesitas respuestas controladas.</em></p>
                </div>
            </div>

            <div class="comparison-table">
                <div>
                    <h4>Fake</h4>
                    <pre><code class="language-csharp">// Implementaci√≥n simplificada
public class FakeRepo : IRepositorio {
    private List<Estudiante> _datos = new();
    public void Guardar(Estudiante e) => _datos.Add(e);
    public Estudiante Obtener(int id) => _datos.FirstOrDefault();
}</code></pre>
                    <p><em>Usar cuando necesitas l√≥gica real pero simple.</em></p>
                </div>
                <div>
                    <h4>Mock</h4>
                    <pre><code class="language-csharp">// Verifica comportamiento
var mock = new Mock&lt;IRepositorio&gt;();
mock.Setup(x => x.Guardar(It.IsAny()))
    .Verifiable();

// Test ejecuta...
mock.Verify(); // Confirma llamada</code></pre>
                    <p><em>Usar cuando necesitas verificar interacciones.</em></p>
                </div>
            </div>
        </section>

        <section id="ejemplos">
            <h2>6. Ejemplos Completos</h2>

            <h3>Ejemplo 1: Calculadora con TDD</h3>

            <h4>1. Escribir la Prueba (RED)</h4>
            <pre><code class="language-csharp">[Fact]
public void Sumar_DosNumeros_RetornaSuma()
{
    // Arrange
    var calc = new Calculadora();

    // Act
    int resultado = calc.Sumar(5, 3);

    // Assert
    Assert.Equal(8, resultado);
}</code></pre>

            <h4>2. C√≥digo M√≠nimo (GREEN)</h4>
            <pre><code class="language-csharp">public class Calculadora
{
    public int Sumar(int a, int b) => a + b; // Minimo para pasar
}</code></pre>

            <h4>3. Refactor (si es necesario)</h4>
            <pre><code class="language-csharp">// El c√≥digo ya es simple, no hay refactor necesario</code></pre>

            <h3>Ejemplo 2: Billetera con Validaciones</h3>

            <h4>Clase Billetera</h4>
            <pre><code class="language-csharp">public class Billetera
{
    private decimal _saldo;

    public decimal Saldo => _saldo;

    public void Agregar(decimal monto)
    {
        if (monto <= 0)
            throw new ArgumentException("Monto debe ser positivo");
        _saldo += monto;
    }

    public void Retirar(decimal monto)
    {
        if (monto <= 0)
            throw new ArgumentException("Monto debe ser positivo");
        if (monto > _saldo)
            throw new InvalidOperationException("Saldo insuficiente");
        _saldo -= monto;
    }
}</code></pre>

            <h4>Tests Completos</h4>
            <pre><code class="language-csharp">public class BilleteraTests
{
    [Fact]
    public void Saldo_Inicialmente_EsCero()
    {
        var billetera = new Billetera();
        Assert.Equal(0, billetera.Saldo);
    }

    [Fact]
    public void Agregar_MontoPositivo_IncrementaSaldo()
    {
        var billetera = new Billetera();
        billetera.Agregar(100);
        Assert.Equal(100, billetera.Saldo);
    }

    [Fact]
    public void Retirar_SaldoSuficiente_DecrementaSaldo()
    {
        var billetera = new Billetera();
        billetera.Agregar(100);
        billetera.Retirar(30);
        Assert.Equal(70, billetera.Saldo);
    }

    [Fact]
    public void Retirar_SaldoInsuficiente_LanzaExcepcion()
    {
        var billetera = new Billetera();
        billetera.Agregar(50);
        Assert.Throws&lt;InvalidOperationException&gt;(
            () => billetera.Retirar(100)
        );
    }
}</code></pre>

            <h3>Ejemplo 3: Parametrizaci√≥n con [Theory]</h3>
            <pre><code class="language-csharp">[Theory]
[InlineData(1, 1, 2)]
[InlineData(5, 3, 8)]
[InlineData(-1, 1, 0)]
[InlineData(0, 0, 0)]
[InlineData(-5, -3, -8)]
public void Sumar_VariosNumeros_RetornaSuma(
    int a, int b, int esperado)
{
    // Arrange
    var calc = new Calculadora();

    // Act
    int resultado = calc.Sumar(a, b);

    // Assert
    Assert.Equal(esperado, resultado);
}</code></pre>
        </section>

        <section id="practica">
            <h2>7. Pr√°ctica / Laboratorio (35 min)</h2>
            <section class="actividad">
                <h3>Actividad: Pr√°ctica TDD con xUnit (35 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Soluci√≥n con librer√≠a de clases y proyecto de pruebas xUnit</p>
                <p><strong>Tiempo estimado:</strong> 35 min</p>
                <p><strong>Criterios de √©xito:</strong> Soluci√≥n compila, al menos 1 prueba en verde, ciclo RED/GREEN completado</p>
                <p><strong>Objetivo:</strong> crear una soluci√≥n con una librer√≠a de clases y un proyecto de pruebas xUnit en Visual Studio 2022.</p>
            <h3>Pasos en Windows (Visual Studio 2022)</h3>
            <ol>
                <li>Crear una soluci√≥n nueva &gt; plantilla <strong>Biblioteca de clases (.NET)</strong>.</li>
                <li>Agregar un proyecto de pruebas: <strong>xUnit Test Project (.NET)</strong>.</li>
                <li>Agregar referencia del proyecto de pruebas a la biblioteca.</li>
                <li>Crear clase <code>Calculadora</code> con m√©todo <code>Sumar</code>.</li>
                <li>Escribir pruebas con <code>[Fact]</code> y ejecutar <strong>Test Explorer</strong>.</li>
            </ol>
            <div class="highlight-box">
                <h4>Checklist</h4>
                <ul>
                    <li>Soluci√≥n compila sin errores.</li>
                    <li>Se ejecuta al menos 1 prueba en verde.</li>
                    <li>Una prueba falla primero (RED) y luego pasa (GREEN).</li>
                </ul>
            </div>
        </section>

        <section id="ejercicios">
            <h2>8. Ejercicios Pr√°cticos</h2>

            <section class="actividad">
                <h3>Actividad: Ejercicio 1 - Calculadora TDD Completa (25 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Calculadora implementada con pruebas TDD</p>
                <p><strong>Tiempo estimado:</strong> 25 min</p>
                <p><strong>Criterios de √©xito:</strong> Pruebas RED/GREEN, m√©todos con nombres claros, manejo de divisi√≥n por cero</p>
                <p>Implementar una calculadora siguiendo TDD:</p>
            <table>
                <thead>
                    <tr>
                        <th>Operaci√≥n</th>
                        <th>Casos de Prueba</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Suma</td><td>2+3=5, -1+1=0, 0+0=0</td></tr>
                    <tr><td>Resta</td><td>5-3=2, 3-5=-2</td></tr>
                    <tr><td>Multiplicaci√≥n</td><td>3*4=12, -2*3=-6</td></tr>
                    <tr><td>Divisi√≥n</td><td>10/2=5, /0 lanza excepci√≥n</td></tr>
                </tbody>
            </table>
            <div class="highlight-box">
                <strong>Checklist:</strong> pruebas RED/GREEN, m√©todos con nombres claros, manejo de divisi√≥n por cero.
            </div>

            <section class="actividad">
                <h3>Actividad: Ejercicio 2 - Validador de Contrase√±as (20 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Validador con pruebas unitarias</p>
                <p><strong>Tiempo estimado:</strong> 20 min</p>
                <p><strong>Criterios de √©xito:</strong> 4 pruebas fallan correctamente, mensajes de error claros, cobertura de bordes</p>
                <pre><code class="language-csharp">public class ValidadorContrasenas
{
    public void Validar(string contrasena)
    {
        if (contrasena.Length < 8)
            throw new ArgumentException("M√≠nimo 8 caracteres");
        if (!contrasena.Any(char.IsUpper))
            throw new ArgumentException("Al menos una may√∫scula");
        if (!contrasena.Any(char.IsDigit))
            throw new ArgumentException("Al menos un n√∫mero");
    }
}</code></pre>

            <p><strong>Requisitos:</strong></p>
            <ul>
                <li>M√≠nimo 8 caracteres</li>
                <li>Al menos una may√∫scula</li>
                <li>Al menos un n√∫mero</li>
                <li>Debe lanzar excepci√≥n si no cumple</li>
            </ul>
            <div class="highlight-box">
                <strong>Checklist:</strong> 4 pruebas fallan correctamente, mensajes de error claros, cobertura de bordes.
            </div>

            <section class="actividad">
                <h3>Actividad: Ejercicio 3 - Carrito de Compras (30 min)</h3>
                <p><strong>Tipo:</strong> Opcional / pr√°ctica</p>
                <p><strong>Relacionado con:</strong> Ninguno</p>
                <p><strong>Entregable:</strong> Carrito de compras con pruebas</p>
                <p><strong>Tiempo estimado:</strong> 30 min</p>
                <p><strong>Criterios de √©xito:</strong> Pruebas por cada regla de negocio, uso de datos parametrizados, validaciones de stock</p>
                <p><strong>Funcionalidades a probar:</strong></p>
            <ul>
                <li>Agregar producto al carrito</li>
                <li>Calcular total del carrito</li>
                <li>Aplicar descuento porcentual</li>
                <li>Validar stock antes de agregar</li>
            </ul>
            <div class="highlight-box">
                <strong>Checklist:</strong> pruebas por cada regla de negocio, uso de datos parametrizados, validaciones de stock.
            </div>
        </section>

        <section id="resumen">
            <h2>Resumen de la Clase</h2>

            <h3>Conceptos Clave Aprendidos</h3>
            <table>
                <thead>
                    <tr>
                        <th>Tema</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>TDD</strong></td><td>Escribir pruebas antes del c√≥digo (Red-Green-Refactor)</td></tr>
                    <tr><td><strong>xUnit</strong></td><td>Framework de pruebas para .NET ([Fact], [Theory])</td></tr>
                    <tr><td><strong>AAA</strong></td><td>Patr√≥n Arrange-Act-Assert para pruebas</td></tr>
                    <tr><td><strong>Test Doubles</strong></td><td>Dummy, Stub, Fake, Mock para aislar pruebas</td></tr>
                </tbody>
            </table>

            <h3>Habilidades Adquiridas</h3>
            <ul>
                <li>Crear proyecto de pruebas xUnit</li>
                <li>Escribir pruebas usando [Fact] y [Theory]</li>
                <li>Aplicar patr√≥n AAA</li>
                <li>Usar Assert para verificar resultados</li>
                <li>Probar excepciones con Assert.Throws</li>
            </ul>

            <h3>Pr√≥ximos Pasos</h3>
            <ul>
                <li><strong>Clase 6:</strong> BDD (Behavior-Driven Development)</li>
                <li>Practicar TDD en proyectos reales</li>
                <li>Explorar Moq para mocks avanzados</li>
            </ul>

            <h3>Referencias y Recursos</h3>
            <ul>
                <li><strong>Documentaci√≥n oficial de xUnit:</strong> <a href="https://xunit.net/" target="_blank" rel="noopener">https://xunit.net/</a></li>
                <li><strong>Gu√≠a de xUnit en Microsoft Learn:</strong> <a href="https://learn.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-dotnet-test" target="_blank" rel="noopener">Unit testing with C#</a></li>
                <li><strong>Moq (mocking library):</strong> <a href="https://github.com/moq/moq4" target="_blank" rel="noopener">https://github.com/moq/moq4</a></li>
                <li><strong>TDD por Kent Beck (inventor):</strong> <em>Test-Driven Development: By Example</em> (libro)</li>
                <li><strong>Three Laws of TDD (Uncle Bob):</strong> <a href="https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html" target="_blank" rel="noopener">The Cycles of TDD</a></li>
                <li><strong>Pir√°mide de testing (Martin Fowler):</strong> <a href="https://martinfowler.com/articles/practical-test-pyramid.html" target="_blank" rel="noopener">The Practical Test Pyramid</a></li>
            </ul>
        </section>
    </div>

    <a href="#inicio" class="back-to-top">&uarr;</a>

    <footer>
        <p><strong>IF0100 - Lenguaje de Programaci√≥n OO II</strong></p>
        <p>UNAULA - Ingenier√≠a Inform√°tica - 2026-I</p>
        <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
            Contacto: [correo del docente] | Repositorio: [enlace del curso]
        </p>
    </footer>
</body>
</html>
