<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introducci√≥n a Test Driven Development (TDD) y el ciclo Red-Green-Refactor. Curso IF0100 - POO II">
    <meta name="author" content="IF0100 - UNAULA">
    <title>Introducci√≥n a TDD | IF0100 - POO II</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <!-- Prism.js para syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
          rel="stylesheet">

    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --light-bg: #f8f9fa;
            --dark-text: #212529;
            --border-color: #dee2e6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--dark-text);
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0a58ca 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        header h2 {
            font-size: 1.25rem;
            font-weight: 400;
            opacity: 0.9;
        }

        header h3 {
            font-size: 1rem;
            font-weight: 300;
            opacity: 0.8;
        }

        /* Navigation */
        .navbar {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 1.5rem;
            position: sticky;
            top: 2rem;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .sidebar h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .sidebar ul {
            list-style: none;
            padding-left: 0;
        }

        .sidebar li {
            margin-bottom: 0.5rem;
        }

        .sidebar a {
            color: var(--dark-text);
            text-decoration: none;
            padding: 0.5rem 0.75rem;
            display: block;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .sidebar a:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateX(5px);
        }

        /* Main Content */
        main {
            padding: 2rem 0;
        }

        section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        section h2 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary-color);
        }

        section h3 {
            color: var(--dark-text);
            font-weight: 500;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        section h4 {
            color: var(--secondary-color);
            font-weight: 500;
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        /* Lists */
        section ul, section ol {
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }

        section li {
            margin-bottom: 0.5rem;
        }

        /* Code Blocks */
        pre[class*="language-"] {
            border-radius: 6px;
            margin: 1rem 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        code[class*="language-"] {
            font-size: 0.9rem;
        }

        /* Alert Boxes */
        .alert-note {
            background-color: #e7f3ff;
            border-left: 4px solid var(--info-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-warning-custom {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-tip {
            background-color: #d1e7dd;
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-error {
            background-color: #f8d7da;
            border-left: 4px solid var(--danger-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        /* Cycle Diagram */
        .cycle-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .cycle-step {
            padding: 1.5rem 2rem;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            min-width: 150px;
        }

        .cycle-red {
            background-color: #ffebee;
            color: #c62828;
            border: 3px solid #c62828;
        }

        .cycle-green {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 3px solid #2e7d32;
        }

        .cycle-refactor {
            background-color: #e3f2fd;
            color: #1565c0;
            border: 3px solid #1565c0;
        }

        .cycle-arrow {
            font-size: 2rem;
            color: var(--secondary-color);
        }

        /* Cards */
        .card {
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Tables */
        .table {
            margin: 1rem 0;
        }

        .table thead {
            background-color: var(--primary-color);
            color: white;
        }

        /* Footer */
        footer {
            background-color: var(--light-bg);
            padding: 2rem 0;
            margin-top: 3rem;
            text-align: center;
            border-top: 1px solid var(--border-color);
        }

        footer p {
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
        }

        /* Print Styles */
        @media print {
            header {
                background: white !important;
                color: black !important;
                padding: 1rem 0;
            }

            .navbar, .sidebar, footer {
                display: none;
            }

            section {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--border-color);
            }

            a {
                color: black;
                text-decoration: none;
            }

            a[href]:after {
                content: " (" attr(href) ")";
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.5rem;
            }

            header h2 {
                font-size: 1rem;
            }

            .sidebar {
                position: static;
                max-height: none;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>IF0100 - Lenguaje de Programaci√≥n OO II</h1>
            <h2>Unidad 2: T√©cnicas de Desarrollo</h2>
            <h3>Clase 01: Introducci√≥n a TDD</h3>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#clases">Clases</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#recursos">Recursos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <!-- Sidebar -->
            <aside class="col-lg-3">
                <nav class="sidebar">
                    <h5>Contenido</h5>
                    <ul>
                        <li><a href="#objetivos">Objetivos de Aprendizaje</a></li>
                        <li><a href="#teoria">Conceptos Te√≥ricos</a></li>
                        <li><a href="#ciclo">Ciclo Red-Green-Refactor</a></li>
                        <li><a href="#ejemplos">Ejemplos Pr√°cticos</a></li>
                        <li><a href="#buenas-practicas">Buenas Pr√°cticas</a></li>
                        <li><a href="#ejercicio">Ejercicio Guido</a></li>
                        <li><a href="#referencias">Para Profundizar</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="col-lg-9">
                <!-- Secci√≥n 1: Objetivos -->
                <section id="objetivos">
                    <h2>Objetivos de Aprendizaje</h2>
                    <p>Al finalizar esta clase, usted ser√° capaz de:</p>
                    <ul>
                        <li>Comprender qu√© es el Test Driven Development (TDD) y su filosof√≠a</li>
                        <li>Identificar los beneficios de usar TDD en el desarrollo de software</li>
                        <li>Aplicar el ciclo Red-Green-Refactor de manera sistem√°tica</li>
                        <li>Escribir tests antes que el c√≥digo de producci√≥n</li>
                        <li>Instalar y configurar pytest para proyectos Python</li>
                        <li>Crear un test unitario b√°sico con pytest</li>
                    </ul>
                </section>

                <!-- Secci√≥n 2: Conceptos Te√≥ricos -->
                <section id="teoria">
                    <h2>Conceptos Te√≥ricos</h2>

                    <h3>¬øQu√© es TDD?</h3>
                    <p>
                        <strong>Test Driven Development (TDD)</strong> o Desarrollo Guiado por Pruebas es una
                        pr√°ctica de desarrollo de software que consiste en escribir los tests <strong>antes</strong>
                        que el c√≥digo de producci√≥n. Es un enfoque iterativo que sigue un ciclo corto de
                        desarrollo:
                    </p>

                    <div class="alert-tip">
                        <strong>Idea clave:</strong> En TDD, el test gu√≠a el dise√±o del c√≥digo.
                        No escribimos c√≥digo para "luego probarlo", escribimos el test primero para saber
                        qu√© c√≥digo necesitamos escribir.
                    </div>

                    <h4>Principios Fundamentales de TDD</h4>
                    <ul>
                        <li><strong>Primero el test:</strong> Escribir un test que falle antes de escribir c√≥digo funcional</li>
                        <li><strong>C√≥digo m√≠nimo:</strong> Escribir solo el c√≥digo suficiente para que el test pase</li>
                        <li><strong>Refactorizaci√≥n:</strong> Mejorar el c√≥digo manteniendo los tests verdes</li>
                        <li><strong>Iteraci√≥n r√°pida:</strong> Ciclos cortos de desarrollo (minutos, no horas)</li>
                        <li><strong>Seguridad:</strong> Los tests son una red de seguridad para futuros cambios</li>
                    </ul>

                    <h3>Beneficios de TDD</h3>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Calidad del C√≥digo</h5>
                                    <p class="card-text">
                                        El c√≥digo tiende a ser m√°s modular, acoplado de manera floja y
                                        con interfaces m√°s claras porque est√° dise√±ado para ser testeable.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Confianza en Cambios</h5>
                                    <p class="card-text">
                                        Los tests act√∫an como documentaci√≥n viviente y regresi√≥n,
                                        permitiendo refactorizar con confianza.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Debugging M√°s R√°pido</h5>
                                    <p class="card-text">
                                        Los errores se detectan inmediatamente, reduciendo el tiempo
                                        spent en debugging.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Dise√±o Guiado</h5>
                                    <p class="card-text">
                                        Los tests fuerzan a pensar en la API y la interfaz antes de
                                        implementar detalles.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>pytest: El Framework de Testing de Python</h3>
                    <p>
                        <strong>pytest</strong> es un framework de testing maduro y completo para Python
                        que hace que escribir tests simples sea f√°cil y tests complejos sean posibles.
                    </p>

                    <h4>Caracter√≠sticas de pytest</h4>
                    <ul>
                        <li><strong>Sintaxis simple:</strong> Usa <code>assert</code> est√°ndar de Python</li>
                        <li><strong>Descubrimiento autom√°tico:</strong> Encuentra tests autom√°ticamente</li>
                        <li><strong>Fixtures:</strong> Sistema poderoso para configurar/desmontar recursos</li>
                        <li><strong>Parametrizaci√≥n:</strong> Ejecutar el mismo test con m√∫ltiples entradas</li>
                        <li><strong>Plugins:</strong> Ecosistema extensible con plugins</li>
                    </ul>

                    <h4>Instalaci√≥n de pytest</h4>
                    <pre><code class="language-bash"># Instalar pytest
pip install pytest

# Instalar con plugins √∫tiles
pip install pytest pytest-cov pytest-mock</code></pre>

                    <h4>Estructura de Directorios para Tests</h4>
                    <pre><code class="language-text">proyecto/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ taskflow/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ models/
‚îÇ           ‚îî‚îÄ‚îÄ usuario.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py          # Fixtures compartidas
‚îÇ   ‚îî‚îÄ‚îÄ test_models.py       # Tests de modelos
‚îú‚îÄ‚îÄ pytest.ini               # Configuraci√≥n de pytest
‚îî‚îÄ‚îÄ requirements.txt</code></pre>

                    <div class="alert-warning-custom">
                        <strong>Convenci√≥n de nombres:</strong> pytest descubre autom√°ticamente:
                        <ul>
                            <li>Archivos que comienzan con <code>test_</code> o terminan con <code>_test.py</code></li>
                            <li>Funciones que comienzan con <code>test_</code></li>
                            <li>Clases que comienzan con <code>Test</code></li>
                        </ul>
                    </div>
                </section>

                <!-- Secci√≥n 3: Ciclo Red-Green-Refactor -->
                <section id="ciclo">
                    <h2>Ciclo Red-Green-Refactor</h2>

                    <p>El coraz√≥n de TDD es un ciclo de tres pasos que se repite continuamente:</p>

                    <div class="cycle-diagram">
                        <div class="cycle-step cycle-red">
                            <h4>RED</h4>
                            <p>Escribir test que falla</p>
                        </div>
                        <div class="cycle-arrow">‚Üí</div>
                        <div class="cycle-step cycle-green">
                            <h4>GREEN</h4>
                            <p>Hacer que pase</p>
                        </div>
                        <div class="cycle-arrow">‚Üí</div>
                        <div class="cycle-step cycle-refactor">
                            <h4>REFACTOR</h4>
                            <p>Mejorar el c√≥digo</p>
                        </div>
                    </div>

                    <figure class="text-center my-4">
                        <img src="../assets/infografias/clase-05-tdd-ciclo.png" alt="Ciclo TDD Red-Green-Refactor" class="img-fluid rounded shadow" style="max-width: 100%; height: auto;">
                        <figcaption class="figure-caption mt-2">Figura 1: Ciclo TDD Red-Green-Refactor</figcaption>
                    </figure>

                    <h3>Paso 1: RED - Escribir un test que falle</h3>
                    <ul>
                        <li>Escribir un test para una nueva funcionalidad</li>
                        <li>Ejecutar el test y verificar que falla (rojo)</li>
                        <li><strong>¬øPor qu√© debe fallar?</strong> Porque a√∫n no hemos implementado la funcionalidad</li>
                    </ul>

                    <div class="alert-error">
                        <strong>Error esperado:</strong> Si el test pasa en este paso, puede significar que:
                        <ul>
                            <li>El test est√° mal escrito (no prueba nada)</li>
                            <li>La funcionalidad ya existe (test duplicado)</li>
                        </ul>
                    </div>

                    <h3>Paso 2: GREEN - Hacer que el test pase</h3>
                    <ul>
                        <li>Escribir el c√≥digo m√≠nimo necesario para que el test pase</li>
                        <li>No preocuparse por la calidad o elegancia del c√≥digo a√∫n</li>
                        <li>Ejecutar el test y verificar que pasa (verde)</li>
                    </ul>

                    <div class="alert-warning-custom">
                        <strong>C√≥digo m√≠nimo:</strong> El objetivo es llegar al verde lo m√°s r√°pido posible.
                        Hardcodear valores est√° permitido si hace pasar el test.
                    </div>

                    <h3>Paso 3: REFACTOR - Mejorar el c√≥digo</h3>
                    <ul>
                        <li>Mejorar el c√≥digo manteniendo los tests verdes</li>
                        <li>Eliminar duplicaci√≥n</li>
                        <li>Mejorar nombres y estructura</li>
                        <li>Ejecutar todos los tests despu√©s de cada refactorizaci√≥n</li>
                    </ul>

                    <div class="alert-tip">
                        <strong>Regla de oro:</strong> Nunca refactorices sin tener tests verdes.
                        Los tests son tu red de seguridad.
                    </div>

                    <h3>Duraci√≥n del Ciclo</h3>
                    <p>
                        Un ciclo completo ideal dura entre <strong>1 y 10 minutos</strong>.
                        Ciclos m√°s largos pueden indicar que el test es muy grande o complejo.
                    </p>

                    <h3>Flujo Completo de TDD</h3>
                    <pre><code class="language-python"># CICLO 1: Crear usuario con username v√°lido
# -----------------------------------------
# RED: Escribir test
def test_crear_usuario_con_username_valido():
    usuario = Usuario(username="jdoe", email="john@example.com")
    assert usuario.username == "jdoe"
    assert usuario.es_valido() == True

# Ejecutar: pytest -v (FALLA: Usuario no existe)

# GREEN: Implementar m√≠nimo
@dataclass
class Usuario:
    username: str
    email: str

    def es_valido(self):
        return True  # Siempre retorna True

# Ejecutar: pytest -v (PASA)

# REFACTOR: Mejorar
@dataclass
class Usuario:
    username: str
    email: str

    def es_valido(self):
        return len(self.username) >= 3  # L√≥gica real

# Ejecutar: pytest -v (PASA)</code></pre>
                </section>

                <!-- Secci√≥n 4: Ejemplos Pr√°cticos -->
                <section id="ejemplos">
                    <h2>Ejemplos Pr√°cticos</h2>

                    <h3>Ejemplo 1: Primer Test con pytest</h3>
                    <p>Supongamos que queremos validar un email. Empezamos con el test:</p>

                    <h4>Paso RED: Test que valida email</h4>
                    <pre><code class="language-python"># archivo: tests/test_validacion.py

def test_email_valido():
    """Test que verifica que un email v√°lido sea aceptado."""
    from taskflow.utils import validar_email

    resultado = validar_email("usuario@example.com")
    assert resultado == True

def test_email_invalido():
    """Test que verifica que un email inv√°lido sea rechazado."""
    from taskflow.utils import validar_email

    resultado = validar_email("email-invalido")
    assert resultado == False</code></pre>

                    <p>Al ejecutar <code>pytest tests/test_validacion.py</code>, obtenemos:</p>
                    <pre><code class="language-bash">$ pytest tests/test_validacion.py
===================================== ERRORS ======================================
_____________________ ERROR collecting tests/test_validacion.py ____________________
...
ModuleNotFoundError: No module named 'taskflow.utils'

================================ 1 error in 0.5s ================================</code></pre>

                    <div class="alert-note">
                        <strong>Estado: RED</strong> - El test falla porque el m√≥dulo no existe.
                        Esto es esperado y correcto.
                    </div>

                    <h4>Paso GREEN: Implementaci√≥n m√≠nima</h4>
                    <pre><code class="language-python"># archivo: src/taskflow/utils.py

def validar_email(email):
    """Valida si un email tiene formato correcto."""
    return "@" in email</code></pre>

                    <p>Ejecutamos nuevamente:</p>
                    <pre><code class="language-bash">$ pytest tests/test_validacion.py -v
==================================== test session starts ====================================
tests/test_validacion.py::test_email_valido PASSED                                      [ 50%]
tests/test_validacion.py::test_email_invalido FAILED                                    [100%]

========================================== FAILURES ==========================================
______________________________________________________________________________
    def test_email_invalido():
        from taskflow.utils import validar_email

>       resultado = validar_email("email-invalido")
        assert resultado == False
E       assert True == False

tests/test_validacion.py:11: AssertionError
==================================== 1 failed, 1 passed in 0.3s =========================</code></pre>

                    <h4>Paso GREEN (continuaci√≥n): Ajuste para pasar</h4>
                    <pre><code class="language-python"># archivo: src/taskflow/utils.py

def validar_email(email):
    """Valida si un email tiene formato correcto."""
    if "@" not in email:
        return False
    # M√≠nimo: algo@algo.algo
    partes = email.split("@")
    return len(partes) == 2 and "." in partes[1]</code></pre>

                    <pre><code class="language-bash">$ pytest tests/test_validacion.py -v
==================================== test session starts ====================================
tests/test_validacion.py::test_email_valido PASSED                                      [ 50%]
tests/test_validacion.py::test_email_invalido PASSED                                    [100%]

===================================== 2 passed in 0.2s ===================================</code></pre>

                    <div class="alert-tip">
                        <strong>Estado: GREEN</strong> - Todos los tests pasan.
                    </div>

                    <h4>Paso REFACTOR: Mejorar el c√≥digo</h4>
                    <pre><code class="language-python"># archivo: src/taskflow/utils.py

import re

def validar_email(email):
    """
    Valida si un email tiene formato correcto.

    Usa regex para validaci√≥n m√°s robusta.
    """
    if not email or not isinstance(email, str):
        return False

    patron = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    return re.match(patron, email) is not None</code></pre>

                    <pre><code class="language-bash">$ pytest tests/test_validacion.py -v
===================================== 2 passed in 0.2s ===================================</code></pre>

                    <div class="alert-tip">
                        <strong>Estado: GREEN</strong> - Los tests siguen pasando despu√©s del refactor.
                        El c√≥digo es m√°s robusto pero mantiene el mismo comportamiento.
                    </div>

                    <h3>Ejemplo 2: Test de Modelo Usuario</h3>
                    <pre><code class="language-python"># archivo: tests/test_models/test_usuario.py

import pytest
from taskflow.models.usuario import Usuario

class TestUsuarioCreacion:
    """Tests para la creaci√≥n de usuarios."""

    def test_crear_usuario_minimo(self):
        """Test crear usuario con campos m√≠nimos."""
        usuario = Usuario(username="jdoe", email="john@example.com")

        assert usuario.username == "jdoe"
        assert usuario.email == "john@example.com"
        assert usuario.id is None  # Nuevo usuario no tiene ID

    def test_crear_usuario_completo(self):
        """Test crear usuario con todos los campos."""
        usuario = Usuario(
            id=1,
            username="jdoe",
            email="john@example.com",
            nombre_completo="John Doe"
        )

        assert usuario.id == 1
        assert usuario.nombre_completo == "John Doe"

class TestUsuarioValidacion:
    """Tests para la validaci√≥n de usuarios."""

    def test_username_muy_corto_falla(self):
        """Test que username corto falla validaci√≥n."""
        usuario = Usuario(username="ab", email="test@example.com")
        errores = usuario.validar()

        assert len(errores) > 0
        assert any("username" in error.lower() for error in errores)

    def test_email_sin_arroba_falla(self):
        """Test que email sin @ falla validaci√≥n."""
        usuario = Usuario(username="test", email="invalido")
        errores = usuario.validar()

        assert len(errores) > 0
        assert any("email" in error.lower() for error in errores)

    def test_usuario_valido_pasa(self):
        """Test que usuario v√°lido pasa validaci√≥n."""
        usuario = Usuario(
            username="jdoe",
            email="john@example.com",
            nombre_completo="John Doe"
        )

        assert usuario.es_valido() == True
        assert len(usuario.validar()) == 0</code></pre>
                </section>

                <!-- Secci√≥n 5: Buenas Pr√°cticas -->
                <section id="buenas-practicas">
                    <h2>Buenas Pr√°cticas</h2>

                    <h3>DO's (Lo que DEBES hacer)</h3>
                    <ul>
                        <li><strong>Escribe tests primero:</strong> Siempre empieza con el test que falla</li>
                        <li><strong>Mant√©n ciclos cortos:</strong> 1-10 minutos por ciclo Red-Green-Refactor</li>
                        <li><strong>Usa nombres descriptivos:</strong> <code>test_usuario_puede_loguearse_con_credenciales_validas</code></li>
                        <li><strong>Un test, una afirmaci√≥n:</strong> Mant√©n los tests enfocados</li>
                        <li><strong>Testea comportamiento, no implementaci√≥n:</strong> Prueba qu√© hace, no c√≥mo lo hace</li>
                        <li><strong>Ejecuta tests frecuentemente:</strong> Despu√©s de cada cambio peque√±o</li>
                        <li><strong>Usa fixtures para setup compartido:</strong> Evita duplicaci√≥n en tests</li>
                    </ul>

                    <h3>DON'T's (Lo que NO DEBES hacer)</h3>
                    <ul>
                        <li><strong>No escribas tests despu√©s del c√≥digo:</strong> Eso no es TDD</li>
                        <li><strong>No escribas tests complejos:</strong> Si el test es complejo, el dise√±o puede estar mal</li>
                        <li><strong>No ignores tests que fallan:</strong> Un test rojo es prioridad</li>
                        <li><strong>No uses condicionales en tests:</strong> Un test debe tener un camino claro</li>
                        <li><strong>No testees c√≥digo de terceros:</strong> No testees libraries o frameworks</li>
                        <li><strong>No hagas mock de todo:</strong> Solo aisla dependencias externas</li>
                    </ul>

                    <h3>Nombres de Tests</h3>
                    <p>Un buen nombre de test debe:</p>
                    <ul>
                        <li>Describir qu√© se est√° probando</li>
                        <li>Describir bajo qu√© condiciones</li>
                        <li>Describir el resultado esperado</li>
                    </ul>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="alert-error">
                                <strong>‚ùå Mal:</strong>
                                <pre><code>def test_usuario():
    assert u.username == "x"</code></pre>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="alert-tip">
                                <strong>‚úÖ Bien:</strong>
                                <pre><code>def test_usuario_puede_crearse_con_username_valido():
    usuario = Usuario(username="jdoe")
    assert usuario.username == "jdoe"</code></pre>
                            </div>
                        </div>
                    </div>

                    <h3>Organizaci√≥n de Tests</h3>
                    <pre><code class="language-python"># Estructura recomendada

class TestUsuarioCreacion:
    """Grupo de tests para creaci√≥n de usuarios."""

    def test_campos_requeridos(self):
        """Test que campos requeridos est√°n presentes."""
        pass

    def test_valores_por_defecto(self):
        """Test valores por defecto de campos opcionales."""
        pass

class TestUsuarioValidacion:
    """Grupo de tests para validaci√≥n."""

    def test_username_valido_aceptado(self):
        """Test username v√°lido es aceptado."""
        pass

    def test_username_invalido_rechazado(self):
        """Test username inv√°lido es rechazado."""
        pass</code></pre>
                </section>

                <!-- Secci√≥n 6: Ejercicio Guido -->
                <section id="ejercicio">
                    <h2>Ejercicio Guido: Test del Modelo Usuario</h2>

                    <h3>Objetivo</h3>
                    <p>
                        Crear tests TDD para el modelo Usuario del proyecto TaskFlow,
                        siguiendo el ciclo Red-Green-Refactor.
                    </p>

                    <h3>Instrucciones Paso a Paso</h3>

                    <h4>Paso 1: Configuraci√≥n (5 min)</h4>
                    <ol>
                        <li>Crear directorio <code>tests/</code> si no existe</li>
                        <li>Crear archivo <code>tests/__init__.py</code> vac√≠o</li>
                        <li>Instalar pytest: <code>pip install pytest</code></li>
                        <li>Crear archivo <code>tests/test_usuario.py</code></li>
                    </ol>

                    <h4>Paso 2: RED - Primer Test (5 min)</h4>
                    <p>Escribir este test que DEBE fallar:</p>
                    <pre><code class="language-python"># tests/test_usuario.py

def test_crear_usuario_con_username():
    """Test que se puede crear usuario con username."""
    from taskflow.models.usuario import Usuario

    usuario = Usuario(username="jdoe", email="john@example.com")

    assert usuario.username == "jdoe"
    assert usuario.email == "john@example.com"</code></pre>

                    <p>Ejecutar: <code>pytest tests/test_usuario.py -v</code></p>
                    <p><strong>Resultado esperado:</strong> ModuleNotFoundError (Estado RED)</p>

                    <h4>Paso 3: GREEN - Implementar M√≠nimo (5 min)</h4>
                    <p>Crear <code>src/taskflow/models/usuario.py</code>:</p>
                    <pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Usuario:
    """Usuario del sistema TaskFlow."""
    username: str
    email: str</code></pre>

                    <p>Ejecutar: <code>pytest tests/test_usuario.py -v</code></p>
                    <p><strong>Resultado esperado:</strong> PASSED (Estado GREEN)</p>

                    <h4>Paso 4: RED - Test de Validaci√≥n (5 min)</h4>
                    <pre><code class="language-python"># Agregar a tests/test_usuario.py

def test_usuario_con_username_corto_falla_validacion():
    """Test que username corto falla validaci√≥n."""
    from taskflow.models.usuario import Usuario

    usuario = Usuario(username="ab", email="test@example.com")

    assert usuario.es_valido() == False</code></pre>

                    <p>Ejecutar: <code>pytest tests/test_usuario.py -v</code></p>
                    <p><strong>Resultado esperado:</strong> AttributeError (Estado RED)</p>

                    <h4>Paso 5: GREEN - Implementar Validaci√≥n (5 min)</h4>
                    <pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Usuario:
    """Usuario del sistema TaskFlow."""
    username: str
    email: str

    def es_valido(self):
        """Verifica si el usuario es v√°lido."""
        return len(self.username) >= 3</code></pre>

                    <h4>Paso 6: REFACTOR - Mejorar (5 min)</h4>
                    <p>Mejorar la implementaci√≥n manteniendo tests verdes:</p>
                    <pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Usuario:
    """Usuario del sistema TaskFlow."""
    username: str
    email: str
    nombre_completo: str = None

    def validar(self):
        """Retorna lista de errores de validaci√≥n."""
        errores = []
        if len(self.username) < 3:
            errores.append("Username debe tener al menos 3 caracteres")
        if "@" not in self.email:
            errores.append("Email debe contener @")
        return errores

    def es_valido(self):
        """Verifica si el usuario es v√°lido."""
        return len(self.validar()) == 0</code></pre>

                    <h4>Paso 7: M√°s Tests (10 min)</h4>
                    <p>Agregar tests para:</p>
                    <ul>
                        <li>Email sin @ falla validaci√≥n</li>
                        <li>Email y username v√°lidos pasan</li>
                        <li>Nombre completo es opcional</li>
                    </ul>

                    <h3>Conexi√≥n con TaskFlow</h3>
                    <p>
                        Los tests que est√°s creando hoy son la base de la capa de modelos del
                        proyecto TaskFlow. Estos tests garantizan que:
                    </p>
                    <ul>
                        <li>Los usuarios se crean correctamente</li>
                        <li>Las validaciones funcionan</li>
                        <li>Podemos refactorizar sin miedo a romper nada</li>
                    </ul>

                    <div class="alert-note">
                        <strong>Recordatorio:</strong> En TDD, NO escribes c√≥digo sin un test primero.
                        Si quieres agregar una nueva funcionalidad, empieza con el test.
                    </div>

                    <h3>Resultado Esperado</h3>
                    <p>Al finalizar este ejercicio, tendr√°s:</p>
                    <ul>
                        <li>‚úÖ pytest configurado en tu proyecto</li>
                        <li>‚úÖ Modelo Usuario con tests</li>
                        <li>‚úÖ Experiencia pr√°ctica del ciclo Red-Green-Refactor</li>
                        <li>‚úÖ Base para agregar m√°s modelos con TDD</li>
                    </ul>
                </section>

                <!-- Secci√≥n 7: Referencias -->
                <section id="referencias">
                    <h2>Para Profundizar</h2>
                    <ul>
                        <li>
                            <a href="https://docs.pytest.org/en/stable/" target="_blank">
                                Documentaci√≥n Oficial de pytest
                            </a>
                        </li>
                        <li>
                            <a href="https://testdriven.io/blog/python-pytest/" target="_blank">
                                Tutorial: Effective Python Testing with pytest
                            </a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/watch?v=UL_pXiR7GME" target="_blank">
                                Video: What is Test Driven Development (TDD)?
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/cosmic-python/code" target="_blank">
                                Cosmic Python - Arquitectura de aplicaciones Python con tests
                            </a>
                        </li>
                        <li>
                            <a href="https://python-pl.github.io/pytest-chinese-doc/" target="_blank">
                                pytest‰∏≠ÊñáÊñáÊ°£ (Documentaci√≥n en chino)
                            </a>
                        </li>
                    </ul>

                    <h3>Comandos √ötiles de pytest</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Comando</th>
                                <th>Descripci√≥n</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>pytest</code></td>
                                <td>Ejecutar todos los tests</td>
                            </tr>
                            <tr>
                                <td><code>pytest -v</code></td>
                                <td>Modo verbose (muestra cada test)</td>
                            </tr>
                            <tr>
                                <td><code>pytest tests/test_usuario.py</code></td>
                                <td>Ejecutar solo tests de un archivo</td>
                            </tr>
                            <tr>
                                <td><code>pytest -k "usuario"</code></td>
                                <td>Ejecutar tests que contengan "usuario" en el nombre</td>
                            </tr>
                            <tr>
                                <td><code>pytest --cov=src</code></td>
                                <td>Ejecutar tests con reporte de cobertura</td>
                            </tr>
                            <tr>
                                <td><code>pytest -x</code></td>
                                <td>Detenerse en el primer test que falle</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </main>
        </div>
    </div>

    <!-- Boton de Notebook -->
    <div class="alert-tip mt-4">
        <a href="https://github.com/heldigard/unaula-IF0100-POO-II/blob/main/notebooks/unidad-02/02-01-tdd-intro.ipynb"
           target="_blank" class="btn btn-primary">
            <i class="bi bi-github me-2"></i>üì• Descargar Notebook en GitHub
        </a>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2026 IF0100 - UNAULA | Todos los derechos reservados</p>
            <p>Nota: El link de Google Colab se activara cuando el notebook sea creado.</p>
            <p>Ultima actualizacion: 2026-02-08</p>
        </div>
    </footer>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    <!-- Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <!-- Prism.js Language Support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>

    <!-- Highlight code on page load -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Prism.highlightAll();
        });
    </script>
</body>
</html>
