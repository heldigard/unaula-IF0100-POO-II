<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introducción a FastAPI: instalación, routing básico y primera API REST. Curso IF0100 - POO II">
    <meta name="author" content="IF0100 - UNAULA">
    <title>Introducción a FastAPI | IF0100 - POO II</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <!-- Prism.js para syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
          rel="stylesheet">

    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #0dcaf0;
            --light-bg: #f8f9fa;
            --dark-text: #212529;
            --border-color: #dee2e6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--dark-text);
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0a58ca 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        header h2 {
            font-size: 1.25rem;
            font-weight: 400;
            opacity: 0.9;
        }

        header h3 {
            font-size: 1rem;
            font-weight: 300;
            opacity: 0.8;
        }

        /* Navigation */
        .navbar {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 1.5rem;
            position: sticky;
            top: 2rem;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
        }

        .sidebar h5 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .sidebar ul {
            list-style: none;
            padding-left: 0;
        }

        .sidebar li {
            margin-bottom: 0.5rem;
        }

        .sidebar a {
            color: var(--dark-text);
            text-decoration: none;
            padding: 0.5rem 0.75rem;
            display: block;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .sidebar a:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateX(5px);
        }

        /* Main Content */
        main {
            padding: 2rem 0;
        }

        section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        section h2 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary-color);
        }

        section h3 {
            color: var(--dark-text);
            font-weight: 500;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        section h4 {
            color: var(--secondary-color);
            font-weight: 500;
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        /* Lists */
        section ul, section ol {
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }

        section li {
            margin-bottom: 0.5rem;
        }

        /* Code Blocks */
        pre[class*="language-"] {
            border-radius: 6px;
            margin: 1rem 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        code[class*="language-"] {
            font-size: 0.9rem;
        }

        /* Alert Boxes */
        .alert-note {
            background-color: #e7f3ff;
            border-left: 4px solid var(--info-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-warning-custom {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-tip {
            background-color: #d1e7dd;
            border-left: 4px solid var(--success-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .alert-error {
            background-color: #f8d7da;
            border-left: 4px solid var(--danger-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        /* Cards */
        .card {
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Tables */
        .table {
            margin: 1rem 0;
        }

        .table thead {
            background-color: var(--primary-color);
            color: white;
        }

        /* HTTP Methods */
        .http-get {
            background-color: #61affe;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .http-post {
            background-color: #49cc90;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .http-put {
            background-color: #fca130;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .http-delete {
            background-color: #f93e3e;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            background-color: var(--light-bg);
            padding: 2rem 0;
            margin-top: 3rem;
            text-align: center;
            border-top: 1px solid var(--border-color);
        }

        footer p {
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
        }

        /* Print Styles */
        @media print {
            header {
                background: white !important;
                color: black !important;
                padding: 1rem 0;
            }

            .navbar, .sidebar, footer {
                display: none;
            }

            section {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--border-color);
            }

            a {
                color: black;
                text-decoration: none;
            }

            a[href]:after {
                content: " (" attr(href) ")";
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.5rem;
            }

            header h2 {
                font-size: 1rem;
            }

            .sidebar {
                position: static;
                max-height: none;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>IF0100 - Lenguaje de Programación OO II</h1>
            <h2>Unidad 3: Desarrollo Backend</h2>
            <h3>Clase 01: Introducción a FastAPI</h3>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#clases">Clases</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#recursos">Recursos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <!-- Sidebar -->
            <aside class="col-lg-3">
                <nav class="sidebar">
                    <h5>Contenido</h5>
                    <ul>
                        <li><a href="#objetivos">Objetivos de Aprendizaje</a></li>
                        <li><a href="#teoria">Conceptos Teóricos</a></li>
                        <li><a href="#instalacion">Instalación de FastAPI</a></li>
                        <li><a href="#primera-app">Primera Aplicación</a></li>
                        <li><a href="#rutas">Rutas y Operaciones</a></li>
                        <li><a href="#parametros">Parámetros en Rutas</a></li>
                        <li><a href="#ejemplos">Ejemplos Prácticos</a></li>
                        <li><a href="#buenas-practicas">Buenas Prácticas</a></li>
                        <li><a href="#ejercicio">Ejercicio Guido</a></li>
                        <li><a href="#referencias">Para Profundizar</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="col-lg-9">
                <!-- Sección 1: Objetivos -->
                <section id="objetivos">
                    <h2>Objetivos de Aprendizaje</h2>
                    <p>Al finalizar esta clase, usted será capaz de:</p>
                    <ul>
                        <li>Comprender qué es FastAPI y sus ventajas</li>
                        <li>Instalar FastAPI y sus dependencias</li>
                        <li>Crear una aplicación FastAPI básica</li>
                        <li>Definir rutas y operaciones HTTP</li>
                        <li>Usar path parameters y query parameters</li>
                        <li>Ejecutar el servidor de desarrollo</li>
                        <li>Probar la API con la documentación automática</li>
                    </ul>
                </section>

                <!-- Sección 2: Conceptos Teóricos -->
                <section id="teoria">
                    <h2>Conceptos Teóricos</h2>

                    <h3>¿Qué es FastAPI?</h3>
                    <p>
                        <strong>FastAPI</strong> es un framework web moderno y rápido para construir
                        APIs con Python 3.7+ basado en estándares de Python: type hints, Pydantic y
                        asyncio.
                    </p>

                    <div class="alert-tip">
                        <strong>Nombre apropiado:</strong> Es "Fast" porque su rendimiento es comparable
                        a NodeJS y Go (gracias a Starlette y Pydantic).
                    </div>

                    <h3>Características Principales</h3>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Rápido</h5>
                                    <p class="card-text">
                                        Alto rendimiento comparable a NodeJS y Go gracias a Starlette.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Rápido de Codificar</h5>
                                    <p class="card-text">
                                        Aumenta la velocidad de desarrollo 2-3x con menos bugs.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Menos Bugs</h5>
                                    <p class="card-text">
                                        Reduce aproximadamente 40% de errores (inducidos por el desarrollador).
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Intuitivo</h5>
                                    <p class="card-text">
                                        Excelente soporte de editores y autocompletado en todas partes.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Fácil</h5>
                                    <p class="card-text">
                                        Diseñado para ser fácil de usar y aprender.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Basado en Estándares</h5>
                                    <p class="card-text">
                                        Basado en estándares abiertos: OpenAPI, JSON Schema.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>API REST en pocas palabras</h3>

                    <p>
                        Una <strong>API REST</strong> es una interfaz que permite a diferentes sistemas
                        comunicarse usando HTTP con operaciones estándar:
                    </p>

                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Método HTTP</th>
                                <th>Operación</th>
                                <th>Ejemplo</th>
                                <th>Código FastAPI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="http-get">GET</span></td>
                                <td>Leer/Obtener</td>
                                <td>Obtener todos los proyectos</td>
                                <td><code>@app.get("/proyectos")</code></td>
                            </tr>
                            <tr>
                                <td><span class="http-post">POST</span></td>
                                <td>Crear</td>
                                <td>Crear un nuevo proyecto</td>
                                <td><code>@app.post("/proyectos")</code></td>
                            </tr>
                            <tr>
                                <td><span class="http-put">PUT</span></td>
                                <td>Actualizar</td>
                                <td>Actualizar un proyecto</td>
                                <td><code>@app.put("/proyectos/{id}")</code></td>
                            </tr>
                            <tr>
                                <td><span class="http-delete">DELETE</span></td>
                                <td>Eliminar</td>
                                <td>Eliminar un proyecto</td>
                                <td><code>@app.delete("/proyectos/{id}")</code></td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Ecosistema de FastAPI</h3>

                    <ul>
                        <li><strong>Starlette:</strong> Framework base para el manejo de HTTP</li>
                        <li><strong>Pydantic:</strong> Validación de datos y serialización</li>
                        <li><strong>Uvicorn:</strong> Servidor ASGI para ejecutar la API</li>
                        <li><strong>OpenAPI:</strong> Documentación automática de la API</li>
                    </ul>

                    <figure class="text-center my-4">
                        <img src="../assets/infografias/clase-08-angular-fastapi.svg" alt="Arquitectura Angular + FastAPI" class="img-fluid rounded shadow" style="max-width: 100%; height: auto;">
                        <figcaption class="figure-caption mt-2">Figura 1: Arquitectura Angular + FastAPI</figcaption>
                    </figure>
                </section>

                <!-- Sección 3: Instalación -->
                <section id="instalacion">
                    <h2>Instalación de FastAPI</h2>

                    <h3>Paso 1: Crear Entorno Virtual</h3>

                    <pre><code class="language-bash"># Crear entorno virtual
python -m venv venv

# Activar en Windows
venv\Scripts\activate

# Activar en Linux/Mac
source venv/bin/activate

# Verificar que está activo (debe ver (venv) al inicio)
which python</code></pre>

                    <h3>Paso 2: Instalar FastAPI y Uvicorn</h3>

                    <pre><code class="language-bash"># Instalar FastAPI
pip install fastapi

# Instalar uvicorn (servidor)
pip install uvicorn[standard]

# Instalar todo junto
pip install fastapi uvicorn[standard]

# O con requirements.txt
# echo "fastapi\nuvicorn[standard]" > requirements.txt
# pip install -r requirements.txt</code></pre>

                    <h3>Paso 3: Verificar Instalación</h3>

                    <pre><code class="language-bash"># Verificar versión de FastAPI
python -c "import fastapi; print(fastapi.__version__)"

# Verificar que uvicorn está instalado
uvicorn --version</code></pre>

                    <div class="alert-warning-custom">
                        <strong>Nota:</strong> En el curso, usaremos <code>uvicorn</code> como servidor de
                        desarrollo. En producción podrías usar <strong>Gunicorn</strong> con Uvicorn workers.
                    </div>
                </section>

                <!-- Sección 4: Primera Aplicación -->
                <section id="primera-app">
                    <h2>Primera Aplicación FastAPI</h2>

                    <h3>Archivo Mínimo: main.py</h3>

                    <pre><code class="language-python"># main.py
from fastapi import FastAPI

# Crear instancia de FastAPI
app = FastAPI(
    title="TaskFlow API",
    description="API del sistema de gestión de tareas",
    version="0.1.0"
)

# Ruta raíz
@app.get("/")
def read_root():
    """
    Endpoint raíz de la API.

    Returns:
        dict: Mensaje de bienvenida
    """
    return {
        "mensaje": "Bienvenido a TaskFlow API",
        "version": "0.1.0",
        "documentacion": "/docs"
    }</code></pre>

                    <h3>Ejecutar el Servidor</h3>

                    <pre><code class="language-bash"># Ejecutar la aplicación
uvicorn main:app --reload

# Verás:
# INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
# INFO:     Started reloader process [xxxxx] using StatReload
# INFO:     Started server process [xxxxx]
# INFO:     Waiting for application startup.
# INFO:     Application startup complete.</code></pre>

                    <div class="alert-tip">
                        <strong>Flags útiles de uvicorn:</strong>
                        <ul>
                            <li><code>--reload</code>: Recarga automática al cambiar código (desarrollo)</li>
                            <li><code>--port 8000</code>: Puerto específico</li>
                            <li><code>--host 0.0.0.0</code>: Escuchar en todas las interfaces</li>
                        </ul>
                    </div>

                    <h3>Probar la API</h3>

                    <pre><code class="language-bash"># Usar curl
curl http://localhost:8000/

# O abrir en navegador:
# http://localhost:8000

# Documentación automática:
# http://localhost:8000/docs (Swagger UI)
# http://localhost:8000/redoc (ReDoc)</code></pre>

                    <h3>Documentación Automática</h3>

                    <p>
                        FastAPI genera automáticamente documentación interactiva usando OpenAPI:
                    </p>
                    <ul>
                        <li><strong>/docs:</strong> Swagger UI (interactiva, con "Try it out")</li>
                        <li><strong>/redoc:</strong> ReDoc (más limpia, solo lectura)</li>
                        <li><strong>/openapi.json:</strong> Especificación OpenAPI</li>
                    </ul>
                </section>

                <!-- Sección 5: Rutas y Operaciones -->
                <section id="rutas">
                    <h2>Rutas y Operaciones</h2>

                    <h3>Sintaxis Básica de Rutas</h3>

                    <pre><code class="language-python">from fastapi import FastAPI

app = FastAPI()

# GET - Obtener todos los proyectos
@app.get("/proyectos")
def obtener_proyectos():
    return [
        {"id": 1, "nombre": "TaskFlow"},
        {"id": 2, "nombre": "Curso POO II"}
    ]

# POST - Crear un nuevo proyecto
@app.post("/proyectos")
def crear_proyecto(proyecto: dict):
    return {
        "mensaje": "Proyecto creado",
        "proyecto": proyecto
    }

# PUT - Actualizar un proyecto
@app.put("/proyectos/{proyecto_id}")
def actualizar_proyecto(proyecto_id: int, proyecto: dict):
    return {
        "mensaje": f"Proyecto {proyecto_id} actualizado",
        "proyecto": proyecto
    }

# DELETE - Eliminar un proyecto
@app.delete("/proyectos/{proyecto_id}")
def eliminar_proyecto(proyecto_id: int):
    return {
        "mensaje": f"Proyecto {proyecto_id} eliminado"
    }</code></pre>

                    <h3>Operaciones HTTP Disponibles</h3>

                    <pre><code class="language-python"># Todos estos métodos están disponibles:
@app.get("/items")
def read_items():
    pass

@app.post("/items")
def create_item():
    pass

@app.put("/items/{item_id}")
def update_item(item_id: int):
    pass

@app.patch("/items/{item_id}")
def partial_update_item(item_id: int):
    pass

@app.delete("/items/{item_id}")
def delete_item(item_id: int):
    pass

@app.options("/items")
def handle_options():
    pass

@app.head("/items")
def handle_head():
    pass</code></pre>

                    <h3>Organizar Rutas en Módulos</h3>

                    <pre><code class="language-python"># routers/proyectos.py
from fastapi import APIRouter

router = APIRouter(
    prefix="/proyectos",
    tags=["proyectos"]
)

@router.get("/")
def obtener_proyectos():
    pass

@router.post("/")
def crear_proyecto():
    pass

# main.py
from fastapi import FastAPI
from routers import proyectos

app = FastAPI()
app.include_router(proyectos.router)</code></pre>
                </section>

                <!-- Sección 6: Parámetros en Rutas -->
                <section id="parametros">
                    <h2>Parámetros en Rutas</h2>

                    <h3>Path Parameters</h3>

                    <p>
                        Los <strong>path parameters</strong> son parte de la URL y se definen
                        entre llaves <code>{}</code>.
                    </p>

                    <pre><code class="language-python">from fastapi import FastAPI

app = FastAPI()

# Path parameter simple
@app.get("/proyectos/{proyecto_id}")
def obtener_proyecto(proyecto_id: int):
    """
    Obtiene un proyecto por su ID.

    Args:
        proyecto_id: ID del proyecto (debe ser entero)

    Returns:
        dict: Datos del proyecto
    """
    return {
        "id": proyecto_id,
        "nombre": f"Proyecto {proyecto_id}",
        "descripcion": "Descripción del proyecto"
    }

# Múltiples path parameters
@app.get("/usuarios/{usuario_id}/proyectos/{proyecto_id}")
def obtener_proyecto_usuario(usuario_id: int, proyecto_id: int):
    return {
        "usuario_id": usuario_id,
        "proyecto_id": proyecto_id,
        "mensaje": f"Proyecto {proyecto_id} del usuario {usuario_id}"
    }</code></pre>

                    <div class="alert-warning-custom">
                        <strong>Tipos de datos:</strong> FastAPI convierte automáticamente los tipos.
                        Si pasas "abc" donde espera <code>int</code>, devuelve un error 422.
                    </div>

                    <h3>Query Parameters</h3>

                    <p>
                        Los <strong>query parameters</strong> son opcionales y van después del <code>?</code>
                        en la URL.
                    </p>

                    <pre><code class="language-python">from typing import Optional

@app.get("/proyectos")
def listar_proyectos(
    skip: int = 0,
    limit: int = 10,
    activo: Optional[bool] = None
):
    """
    Lista proyectos con paginación y filtros.

    Args:
        skip: Cantidad a saltar (default: 0)
        limit: Cantidad máxima a retornar (default: 10)
        activo: Filtrar por estado activo (opcional)

    Returns:
        list: Lista de proyectos
    """
    proyectos = [
        {"id": i, "nombre": f"Proyecto {i}", "activo": i % 2 == 0}
        for i in range(1, 21)
    ]

    # Aplicar filtros
    if activo is not None:
        proyectos = [p for p in proyectos if p["activo"] == activo]

    # Aplicar paginación
    return proyectos[skip : skip + limit]</code></pre>

                    <p>Ejemplos de URLs:</p>
                    <pre><code class="language-text">/proyectos                    # skip=0, limit=10, activo=None
/proyectos?skip=5             # skip=5, limit=10, activo=None
/proyectos?activo=true         # skip=0, limit=10, activo=True
/proyectos?activo=true&limit=5 # skip=0, limit=5, activo=True</code></pre>

                    <h3>Parámetros Opcionales y Requeridos</h3>

                    <pre><code class="language-python">@app.get("/items/{item_id}")
def read_item(
    item_id: int,                    # Requerido (path parameter)
    nombre: Optional[str] = None,    # Opcional (query parameter)
    descripcion: Optional[str] = None # Opcional (query parameter)
):
    """
    item_id es requerido.
    nombre y descripcion son opcionales.
    """
    return {
        "item_id": item_id,
        "nombre": nombre or "Sin nombre",
        "descripcion": descripcion or "Sin descripción"
    }</code></pre>

                    <h3>Request Body</h3>

                    <pre><code class="language-python">from pydantic import BaseModel

class ProyectoCreate(BaseModel):
    """Modelo para crear un proyecto."""
    nombre: str
    descripcion: Optional[str] = None

@app.post("/proyectos")
def crear_proyecto(proyecto: ProyectoCreate):
    """
    Crea un proyecto.

    El cuerpo del request se valida automáticamente con Pydantic.
    """
    return {
        "mensaje": "Proyecto creado exitosamente",
        "proyecto": {
            "id": 1,
            **proyecto.dict()  # Convierte el modelo a dict
        }
    }</code></pre>

                    <h3>Combinando Todos los Tipos</h3>

                    <pre><code class="language-python">@app.put("/proyectos/{proyecto_id}")
def actualizar_proyecto(
    proyecto_id: int,                          # Path parameter
    proyecto: ProyectoCreate,                   # Request body
    usuario_id: Optional[int] = None            # Query parameter
):
    """
    Actualiza un proyecto.

    Combina path parameter, request body y query parameter.
    """
    return {
        "proyecto_id": proyecto_id,
        "usuario_id": usuario_id,
        "proyecto_actualizado": proyecto.dict()
    }</code></pre>
                </section>

                <!-- Sección 7: Ejemplos Prácticos -->
                <section id="ejemplos">
                    <h2>Ejemplos Prácticos</h2>

                    <h3>Ejemplo 1: API de Usuarios</h3>

                    <pre><code class="language-python"># main.py
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel, EmailStr
from typing import List, Optional

app = FastAPI(title="API de Usuarios")

# Modelos Pydantic
class UsuarioBase(BaseModel):
    """Campos base de usuario."""
    username: str
    email: EmailStr
    nombre_completo: Optional[str] = None

class UsuarioCreate(UsuarioBase):
    """Modelo para crear usuario."""
    password: str

class UsuarioResponse(UsuarioBase):
    """Modelo para respuesta de usuario."""
    id: int
    activo: bool = True

# Base de datos simulada
db_usuarios = []
next_id = 1

@app.post("/usuarios", response_model=UsuarioResponse, status_code=201)
def crear_usuario(usuario: UsuarioCreate):
    """
    Crea un nuevo usuario.

    Returns:
        UsuarioResponse: Usuario creado (sin password)
    """
    global next_id

    # Verificar duplicados
    for u in db_usuarios:
        if u["username"] == usuario.username:
            raise HTTPException(
                status_code=400,
                detail="Username ya existe"
            )

    # Crear usuario
    nuevo_usuario = {
        "id": next_id,
        **usuario.dict(),
        "activo": True
    }
    # Eliminar password (no se guarda en texto plano)
    del nuevo_usuario["password"]

    db_usuarios.append(nuevo_usuario)
    next_id += 1

    return nuevo_usuario

@app.get("/usuarios", response_model=List[UsuarioResponse])
def listar_usuarios(
    skip: int = 0,
    limit: int = 10,
    activo: Optional[bool] = None
):
    """Lista todos los usuarios con paginación."""
    usuarios = db_usuarios

    if activo is not None:
        usuarios = [u for u in usuarios if u["activo"] == activo]

    return usuarios[skip : skip + limit]

@app.get("/usuarios/{usuario_id}", response_model=UsuarioResponse)
def obtener_usuario(usuario_id: int):
    """Obtiene un usuario por su ID."""
    for usuario in db_usuarios:
        if usuario["id"] == usuario_id:
            return usuario

    raise HTTPException(
        status_code=404,
        detail="Usuario no encontrado"
    )</code></pre>

                    <h3>Ejemplo 2: Manejo de Errores</h3>

                    <pre><code class="language-python">from fastapi import HTTPException, status

@app.get("/proyectos/{proyecto_id}")
def obtener_proyecto(proyecto_id: int):
    """
    Obtiene un proyecto.

    Raises:
        HTTPException: Si el proyecto no existe
    """
    proyecto = buscar_proyecto(proyecto_id)

    if not proyecto:
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail={
                "error": "Proyecto no encontrado",
                "proyecto_id": proyecto_id
            },
            headers={"X-Error": "Proyecto no existe"}
        )

    return proyecto

@app.post("/proyectos")
def crear_proyecto(proyecto: ProyectoCreate):
    """
    Crea un proyecto.

    Raises:
        HTTPException: Si los datos son inválidos
    """
    if len(proyecto.nombre) < 3:
        raise HTTPException(
            status_code=status.HTTP_422_UNPROCESSABLE_ENTITY,
            detail="Nombre muy corto (mínimo 3 caracteres)"
        )

    return guardar_proyecto(proyecto)</code></pre>

                    <h3>Ejemplo 3: Respuestas con Diferentes Códigos</h3>

                    <pre><code class="language-python">from fastapi import status

@app.post("/usuarios", status_code=status.HTTP_201_CREATED)
def crear_usuario(usuario: UsuarioCreate):
    """
    Retorna 201 Created al crear un usuario exitosamente.
    """
    return guardar_usuario(usuario)

@app.delete("/proyectos/{proyecto_id}", status_code=status.HTTP_204_NO_CONTENT)
def eliminar_proyecto(proyecto_id: int):
    """
    Retorna 204 No Content al eliminar (no retorna cuerpo).
    """
    eliminar_proyecto_bd(proyecto_id)
    return None  # FastAPI retorna 204 automáticamente</code></pre>
                </section>

                <!-- Sección 8: Buenas Prácticas -->
                <section id="buenas-practicas">
                    <h2>Buenas Prácticas</h2>

                    <h3>Estructura de Proyecto</h3>

                    <pre><code class="language-text">taskflow-api/
├── app/
│   ├── __init__.py
│   ├── main.py              # Aplicación FastAPI
│   ├── api/
│   │   ├── __init__.py
│   │   └── v1/
│   │       ├── __init__.py
│   │       ├── endpoints/
│   │       │   ├── __init__.py
│   │       │   ├── usuarios.py
│   │       │   ├── proyectos.py
│   │       │   └── tareas.py
│   │       └── api.py      # Router principal
│   ├── models/
│   │   ├── __init__.py
│   │   ├── usuario.py
│   │   └── proyecto.py
│   ├── schemas/
│   │   ├── __init__.py
│   │   ├── usuario.py      # Schemas Pydantic
│   │   └── proyecto.py
│   ├── core/
│   │   ├── __init__.py
│   │   ├── config.py
│   │   └── security.py
│   └── db/
│       ├── __init__.py
│       └── database.py
├── tests/
├── requirements.txt
├── alembic.ini
└── README.md</code></pre>

                    <h3>Convenciones de Nombres</h3>

                    <div class="alert-tip">
                        <strong>Para endpoints:</strong>
                        <ul>
                            <li>Usar nombres en plural: <code>/usuarios</code>, no <code>/usuario</code></li>
                            <li>Usar minúsculas y guiones: <code>/usuarios-activos</code></li>
                            <li>Sustantivos, no verbos: <code>/proyectos</code>, no <code>/obtener-proyectos</code></li>
                            <li>El método HTTP indica la acción: GET = leer, POST = crear</li>
                        </ul>
                    </div>

                    <h3>DO's con FastAPI</h3>

                    <ul>
                        <li><strong>Usa type hints:</strong> Ayuda con autocompletado y validación</li>
                        <li><strong>Usa Pydantic:</strong> Para validación de request/response</li>
                        <li><strong>Documenta con docstrings:</strong> Aparece en /docs</li>
                        <li><strong>Usa response_model:</strong> Para documentar respuestas</li>
                        <li><strong>Maneja errores con HTTPException:</strong> Respuestas consistentes</li>
                        <li><strong>Usa status codes correctos:</strong> 201, 404, 422, etc.</li>
                    </ul>

                    <h3>DON'T's con FastAPI</h3>

                    <ul>
                        <li><strong>No omitas type hints:</strong> Pierdes validación automática</li>
                        <li><strong No mezcles lógica de negocio en endpoints:</strong> Usa servicios</li>
                        <li><strong>No uses colores en rutas:</strong> <code>/api/v1/usuarios</code>, no <code>/api/v1/Usuarios</code></li>
                        <li><strong No retornes strings en POST:</strong> Usa JSON consistente</li>
                    </ul>
                </section>

                <!-- Sección 9: Ejercicio Guido -->
                <section id="ejercicio">
                    <h2>Ejercicio Guido: Endpoint /api/hola-mundo</h2>

                    <h3>Objetivo</h3>
                    <p>
                        Crear un endpoint básico en FastAPI que retorne un mensaje de bienvenida.
                    </p>

                    <h3>Instrucciones Paso a Paso</h3>

                    <h4>Paso 1: Crear Estructura (2 min)</h4>
                    <pre><code class="language-bash"># Crear directorio del proyecto
mkdir taskflow-api
cd taskflow-api

# Crear entorno virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
# o: venv\Scripts\activate  # Windows

# Instalar dependencias
pip install fastapi uvicorn[standard]</code></pre>

                    <h4>Paso 2: Crear main.py (5 min)</h4>

                    <pre><code class="language-python"># main.py
from fastapi import FastAPI

# Crear aplicación
app = FastAPI(
    title="TaskFlow API",
    description="API del sistema de gestión de tareas TaskFlow",
    version="0.1.0"
)

# Endpoint raíz
@app.get("/")
def read_root():
    """Retorna mensaje de bienvenida."""
    return {
        "mensaje": "Bienvenido a TaskFlow API",
        "version": "0.1.0",
        "documentacion": "/docs",
        "docs_alternativa": "/redoc"
    }

# Endpoint /api/hola-mundo
@app.get("/api/hola-mundo")
def hola_mundo():
    """
    Endpoint simple que retorna un saludo.

    Returns:
        dict: Saludo con información de la API
    """
    return {
        "mensaje": "¡Hola, Mundo!",
        "api": "TaskFlow API",
        "status": "funcionando"
    }</code></pre>

                    <h4>Paso 3: Ejecutar Servidor (2 min)</h4>

                    <pre><code class="language-bash"># Ejecutar con recarga automática
uvicorn main:app --reload

# Verás:
# INFO:     Uvicorn running on http://127.0.0.1:8000</code></pre>

                    <h4>Paso 4: Probar Endpoint (3 min)</h4>

                    <pre><code class="language-bash"># Usar curl
curl http://localhost:8000/api/hola-mundo

# Usar Python
import requests
response = requests.get("http://localhost:8000/api/hola-mundo")
print(response.json())

# O abrir en navegador:
# http://localhost:8000/api/hola-mundo</code></pre>

                    <h4>Paso 5: Explorar Documentación (3 min)</h4>

                    <p>Abrir en el navegador:</p>
                    <ul>
                        <li><strong>http://localhost:8000/docs</strong> - Swagger UI</li>
                        <li><strong>http://localhost:8000/redoc</strong> - ReDoc</li>
                    </ul>

                    <p>Probar el endpoint desde la documentación:</p>
                    <ol>
                        <li>Hacer clic en <code>GET /api/hola-mundo</code></li>
                        <li>Hacer clic en "Try it out"</li>
                        <li>Hacer clic en "Execute"</li>
                        <li>Ver la respuesta</li>
                    </ol>

                    <h4>Paso 6: Agregar Parámetros (5 min)</h4>

                    <pre><code class="language-python"># Agregar a main.py
from typing import Optional

@app.get("/api/saludar")
def saludar(
    nombre: str = "Mundo",
    idioma: Optional[str] = None
):
    """
    Saluda personalizado con parámetros.

    Args:
        nombre: Nombre a saludar (default: "Mundo")
        idioma: Idioma del saludo ("es", "en")

    Returns:
        dict: Saludo personalizado
    """
    if idioma == "en":
        mensaje = f"Hello, {nombre}!"
    elif idioma == "es":
        mensaje = f"¡Hola, {nombre}!"
    else:
        mensaje = f"¡Hola, {nombre}!"

    return {
        "mensaje": mensaje,
        "nombre": nombre,
        "idioma": idioma or "es"
    }</code></pre>

                    <p>Probar diferentes URLs:</p>
                    <pre><code class="language-bash">/api/saludar
/api/saludar?nombre=Juan
/api/saludar?nombre=María&idioma=en
/api/saludar?nombre=Pedro&idioma=es</code></pre>

                    <h3>Conexión con TaskFlow</h3>
                    <p>
                        Este endpoint es el punto de partida de la API REST de TaskFlow.
                        En las próximas clases agregaremos:
                    </p>
                    <ul>
                        <li>Endpoints de usuarios (CRUD completo)</li>
                        <li>Endpoints de proyectos</li>
                        <li>Endpoints de tareas</li>
                        <li>Autenticación con JWT</li>
                        <li>Conexión con PostgreSQL</li>
                    </ul>

                    <h3>Resultado Esperado</h3>
                    <p>Al finalizar este ejercicio, tendrás:</p>
                    <ul>
                        <li>✅ FastAPI instalado y configurado</li>
                        <li>✅ Primera aplicación ejecutándose</li>
                        <li>✅ Endpoint /api/hola-mundo funcionando</li>
                        <li>✅ Documentación automática explorada</li>
                        <li>✅ Base para agregar más endpoints</li>
                    </ul>

                    <div class="alert-note">
                        <strong>Próximos pasos:</strong> En la siguiente clase aprenderemos a usar
                        Pydantic para validación de datos y crear schemas request/response.
                    </div>
                </section>

                <!-- Sección 10: Referencias -->
                <section id="referencias">
                    <h2>Para Profundizar</h2>
                    <ul>
                        <li>
                            <a href="https://fastapi.tiangolo.com/" target="_blank">
                                Documentación Oficial de FastAPI
                            </a>
                        </li>
                        <li>
                            <a href="https://fastapi.tiangolo.com/tutorial/" target="_blank">
                                Tutorial de FastAPI (User Guide)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/watch?v=7t2alSnE48I" target="_blank">
                                Video: FastAPI en 10 minutos
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/tiangolo/fastapi" target="_blank">
                                FastAPI en GitHub
                            </a>
                        </li>
                        <li>
                            <a href="https://testdriven.io/blog/fastapi-vs-flask/" target="_blank">
                                Comparativa: FastAPI vs Flask
                            </a>
                        </li>
                    </ul>

                    <h3>Comandos Útiles</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Comando</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>uvicorn main:app</code></td>
                                <td>Ejecutar servidor (sin recarga)</td>
                            </tr>
                            <tr>
                                <td><code>uvicorn main:app --reload</code></td>
                                <td>Ejecutar con recarga automática</td>
                            </tr>
                            <tr>
                                <td><code>uvicorn main:app --port 8080</code></td>
                                <td>Ejecutar en puerto específico</td>
                            </tr>
                            <tr>
                                <td><code>uvicorn main:app --host 0.0.0.0</code></td>
                                <td>Escuchar en todas las interfaces</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </main>
        </div>
    </div>

    <!-- Boton de Notebook -->
    <div class="alert-tip mt-4">
        <span class="btn btn-warning disabled" style="cursor: not-allowed;">
            <i class="bi bi-clock me-2"></i>⚠️ Notebook pendiente de creacion
        </span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2026 IF0100 - UNAULA | Todos los derechos reservados</p>
            <p>Nota: El link de Google Colab se activara cuando el notebook sea creado.</p>
            <p>Ultima actualizacion: 2026-02-08</p>
        </div>
    </footer>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    <!-- Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <!-- Prism.js Language Support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>

    <!-- Highlight code on page load -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Prism.highlightAll();
        });
    </script>
</body>
</html>
